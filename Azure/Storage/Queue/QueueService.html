<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Azure::Storage::Queue::QueueService
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Azure::Storage::Queue::QueueService";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (Q)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span>
     &raquo; 
    <span class="title">QueueService</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Azure::Storage::Queue::QueueService
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Azure::Storage::Queue::QueueService</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>queue/lib/azure/storage/queue/queue_service.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-class_method" title="create (class method)">.<strong>create</strong>(options = {}, &amp;block)  &#x21d2; Azure::Storage::Queue::QueueService </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates an instance of [Azure::Storage::Queue::QueueService].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_development-class_method" title="create_development (class method)">.<strong>create_development</strong>(proxy_uri = nil, &amp;block)  &#x21d2; Azure::Storage::Queue::QueueService </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates an instance of [Azure::Storage::Queue::QueueService] with
Storage Emulator.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_from_connection_string-class_method" title="create_from_connection_string (class method)">.<strong>create_from_connection_string</strong>(connection_string, &amp;block)  &#x21d2; Azure::Storage::Queue::QueueService </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates an instance of [Azure::Storage::Queue::QueueService] from
Environment Variables.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_from_env-class_method" title="create_from_env (class method)">.<strong>create_from_env</strong>(&amp;block)  &#x21d2; Azure::Storage::Queue::QueueService </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates an instance of [Azure::Storage::Queue::QueueService] from
Environment Variables.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_messages-instance_method" title="#clear_messages (instance method)">#<strong>clear_messages</strong>(queue_name, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Clears all messages from the queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_message-instance_method" title="#create_message (instance method)">#<strong>create_message</strong>(queue_name, message_text, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Adds a message to the queue and optionally sets a visibility
timeout for the message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_queue-instance_method" title="#create_queue (instance method)">#<strong>create_queue</strong>(queue_name, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a new queue under the storage account.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_message-instance_method" title="#delete_message (instance method)">#<strong>delete_message</strong>(queue_name, message_id, pop_receipt, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Deletes a specified message from the queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_queue-instance_method" title="#delete_queue (instance method)">#<strong>delete_queue</strong>(queue_name, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Deletes a queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_queue_acl-instance_method" title="#get_queue_acl (instance method)">#<strong>get_queue_acl</strong>(queue_name, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Gets the access control list (ACL) for the queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_queue_metadata-instance_method" title="#get_queue_metadata (instance method)">#<strong>get_queue_metadata</strong>(queue_name, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Returns queue properties, including user-defined metadata.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(options = {}, &amp;block)  &#x21d2; QueueService </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Initializes an instance of [Azure::Storage::Queue::QueueService].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_messages-instance_method" title="#list_messages (instance method)">#<strong>list_messages</strong>(queue_name, visibility_timeout, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Retrieves one or more messages from the front of the queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_queues-instance_method" title="#list_queues (instance method)">#<strong>list_queues</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Get a list of Queues from the server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peek_messages-instance_method" title="#peek_messages (instance method)">#<strong>peek_messages</strong>(queue_name, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Retrieves one or more messages from the front of the queue, without
changing the message visibility.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_queue_acl-instance_method" title="#set_queue_acl (instance method)">#<strong>set_queue_acl</strong>(queue_name, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Sets the access control list (ACL) for the queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_queue_metadata-instance_method" title="#set_queue_metadata (instance method)">#<strong>set_queue_metadata</strong>(queue_name, metadata, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Sets user-defined metadata on the queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_message-instance_method" title="#update_message (instance method)">#<strong>update_message</strong>(queue_name, message_id, pop_receipt, message_text, visibility_timeout, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Adds a message to the queue and optionally sets a visibility
timeout for the message.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(options = {}, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">QueueService</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Initializes an instance of [Azure::Storage::Queue::QueueService]</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>options</code>    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:use_development_storage</code>        - TrueClass|FalseClass.
Whether to use storage emulator.</p>
</li><li>
<p><code>:development_storage_proxy_uri</code>  - String. Used with
<code>:use_development_storage</code> if emulator is hosted other than
localhost.</p>
</li><li>
<p><code>:storage_connection_string</code>      - String. The storage
connection string.</p>
</li><li>
<p><code>:storage_account_name</code>           - String. The name of the
storage account.</p>
</li><li>
<p><code>:storage_access_key</code>             - Base64 String. The access
key of the storage account.</p>
</li><li>
<p><code>:storage_sas_token</code>              - String. The signed access
signature for the storage account or one of its service.</p>
</li><li>
<p><code>:storage_queue_host</code>              - String. Specified Queue
serivce endpoint or hostname</p>
</li><li>
<p><code>:storage_dns_suffix</code>             - String. The suffix of a
regional Storage Serivce, to</p>
</li><li>
<p><code>:default_endpoints_protocol</code>     - String. http or https</p>
</li><li>
<p><code>:use_path_style_uri</code>             - String. Whether use path
style URI for specified endpoints</p>
</li><li>
<p><code>:ca_file</code>                        - String. File path of the CA
file if having issue with SSL</p>
</li><li>
<p><code>:user_agent_prefix</code>              - String. The user agent
prefix that can identify the application calls the library</p>
</li><li>
<p><code>:client</code>                         -
Azure::Storage::Common::Client. The common client used to initalize the
service.</p>
</li></ul>

<p>The valid set of options include:</p>
<ul><li>
<p>Storage Emulator: <code>:use_development_storage</code> required,
<code>:development_storage_proxy_uri</code> optionally</p>
</li><li>
<p>Storage account name and key: <code>:storage_account_name</code> and
<code>:storage_access_key</code> required, set
<code>:storage_dns_suffix</code> necessarily</p>
</li><li>
<p>Storage account name and SAS token: <code>:storage_account_name</code> and
<code>:storage_sas_token</code> required, set
<code>:storage_dns_suffix</code> necessarily</p>
</li><li>
<p>Specified hosts and SAS token: At least one of the service host and SAS
token. It&#39;s up to user to ensure the SAS token is suitable for the
serivce</p>
</li><li>
<p>Azure::Storage::Common::Client: The common client used to initalize the
service. This client can be initalized and used repeatedly.</p>
</li><li>
<p>Anonymous Queue: only <code>:storage_queue_host</code>, if it is to only
access queues within a container</p>
</li></ul>

<p>Additional notes:</p>
<ul><li>
<p>Specified hosts can be set when use account name with access key or sas
token</p>
</li><li>
<p><code>:default_endpoints_protocol</code> can be set if the scheme is not
specified in hosts</p>
</li><li>
<p>Storage emulator always use path style URI</p>
</li><li>
<p><code>:ca_file</code> is independent.</p>
</li></ul>

<p>When empty options are given, it will try to read settings from Environment
Variables. Refer to
[Azure::Storage::Common::ClientOptions.env_vars_mapping] for the mapping
relationship</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_service_options'>service_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_clone'>clone</span>
  <span class='id identifier rubyid_client_config'>client_config</span> <span class='op'>=</span> <span class='id identifier rubyid_service_options'>service_options</span><span class='lbracket'>[</span><span class='symbol'>:client</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Client</span><span class='op'>::</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_service_options'>service_options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@user_agent_prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_service_options'>service_options</span><span class='lbracket'>[</span><span class='symbol'>:user_agent_prefix</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_service_options'>service_options</span><span class='lbracket'>[</span><span class='symbol'>:user_agent_prefix</span><span class='rbracket'>]</span>
  <span class='ivar'>@api_version</span> <span class='op'>=</span> <span class='id identifier rubyid_service_options'>service_options</span><span class='lbracket'>[</span><span class='symbol'>:api_version</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html" title="Azure::Storage::Queue::Default (module)">Default</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html#STG_VERSION-constant" title="Azure::Storage::Queue::Default::STG_VERSION (constant)">STG_VERSION</a></span></span>
  <span class='id identifier rubyid_signer'>signer</span> <span class='op'>=</span> <span class='id identifier rubyid_service_options'>service_options</span><span class='lbracket'>[</span><span class='symbol'>:signer</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_client_config'>client_config</span><span class='period'>.</span><span class='id identifier rubyid_signer'>signer</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Core</span><span class='op'>::</span><span class='const'>Auth</span><span class='op'>::</span><span class='const'>SharedKey</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_client_config'>client_config</span><span class='period'>.</span><span class='id identifier rubyid_storage_account_name'>storage_account_name</span><span class='comma'>,</span> <span class='id identifier rubyid_client_config'>client_config</span><span class='period'>.</span><span class='id identifier rubyid_storage_access_key'>storage_access_key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_api_ver'>api_ver</span> <span class='op'>=</span> <span class='ivar'>@api_version</span> <span class='kw'>if</span> <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Core</span><span class='op'>::</span><span class='const'>Auth</span><span class='op'>::</span><span class='const'>SharedAccessSignatureSigner</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_signer'>signer</span><span class='comma'>,</span> <span class='id identifier rubyid_client_config'>client_config</span><span class='period'>.</span><span class='id identifier rubyid_storage_account_name'>storage_account_name</span><span class='comma'>,</span> <span class='id identifier rubyid_service_options'>service_options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@storage_service_host</span><span class='lbracket'>[</span><span class='symbol'>:primary</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_storage_queue_host'>storage_queue_host</span>
  <span class='ivar'>@storage_service_host</span><span class='lbracket'>[</span><span class='symbol'>:secondary</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_storage_queue_host'>storage_queue_host</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create-class_method">
  
    .<strong>create</strong>(options = {}, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">Azure::Storage::Queue::QueueService</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates an instance of [Azure::Storage::Queue::QueueService]</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>options</code>    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:use_development_storage</code>        - TrueClass|FalseClass.
Whether to use storage emulator.</p>
</li><li>
<p><code>:development_storage_proxy_uri</code>  - String. Used with
<code>:use_development_storage</code> if emulator is hosted other than
localhost.</p>
</li><li>
<p><code>:storage_account_name</code>           - String. The name of the
storage account.</p>
</li><li>
<p><code>:storage_access_key</code>             - Base64 String. The access
key of the storage account.</p>
</li><li>
<p><code>:storage_sas_token</code>              - String. The signed access
signature for the storage account or one of its service.</p>
</li><li>
<p><code>:storage_queue_host</code>             - String. Specified Queue
service endpoint or hostname</p>
</li><li>
<p><code>:storage_dns_suffix</code>             - String. The suffix of a
regional Storage Service, to</p>
</li><li>
<p><code>:default_endpoints_protocol</code>     - String. http or https</p>
</li><li>
<p><code>:use_path_style_uri</code>             - String. Whether use path
style URI for specified endpoints</p>
</li><li>
<p><code>:ca_file</code>                        - String. File path of the CA
file if having issue with SSL</p>
</li><li>
<p><code>:user_agent_prefix</code>              - String. The user agent
prefix that can identify the application calls the library</p>
</li></ul>

<p>The valid set of options include:</p>
<ul><li>
<p>Storage Emulator: <code>:use_development_storage</code> required,
<code>:development_storage_proxy_uri</code> optionally</p>
</li><li>
<p>Storage account name and key: <code>:storage_account_name</code> and
<code>:storage_access_key</code> required, set
<code>:storage_dns_suffix</code> necessarily</p>
</li><li>
<p>Storage account name and SAS token: <code>:storage_account_name</code> and
<code>:storage_sas_token</code> required, set
<code>:storage_dns_suffix</code> necessarily</p>
</li><li>
<p>Specified hosts and SAS token: At least one of the service host and SAS
token. It&#39;s up to user to ensure the SAS token is suitable for the
serivce</p>
</li><li>
<p>Anonymous Queue: only <code>:storage_queue_host</code>, if it is to only
access queues within a container</p>
</li></ul>

<p>Additional notes:</p>
<ul><li>
<p>Specified hosts can be set when use account name with access key or sas
token</p>
</li><li>
<p><code>:default_endpoints_protocol</code> can be set if the scheme is not
specified in hosts</p>
</li><li>
<p>Storage emulator always use path style URI</p>
</li><li>
<p><code>:ca_file</code> is independent.</p>
</li></ul>

<p>When empty options are given, it will try to read settings from Environment
Variables. Refer to
[Azure::Storage::Common::ClientOptions.env_vars_mapping] for the mapping
relationship</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">Azure::Storage::Queue::QueueService</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_service_options'>service_options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>client:</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Client</span><span class='op'>::</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>api_version:</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html" title="Azure::Storage::Queue::Default (module)">Default</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html#STG_VERSION-constant" title="Azure::Storage::Queue::Default::STG_VERSION (constant)">STG_VERSION</a></span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_service_options'>service_options</span><span class='lbracket'>[</span><span class='symbol'>:user_agent_prefix</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:user_agent_prefix</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:user_agent_prefix</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">QueueService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Azure::Storage::Queue::QueueService#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_service_options'>service_options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_development-class_method">
  
    .<strong>create_development</strong>(proxy_uri = nil, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">Azure::Storage::Queue::QueueService</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates an instance of [Azure::Storage::Queue::QueueService] with
Storage Emulator</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>proxy_uri</code>    - String. Used with
<code>:use_development_storage</code> if emulator is hosted other than
localhost.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">Azure::Storage::Queue::QueueService</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 84</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_development'>create_development</span><span class='lparen'>(</span><span class='id identifier rubyid_proxy_uri'>proxy_uri</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_service_options'>service_options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>client:</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Client</span><span class='op'>::</span><span class='id identifier rubyid_create_development'>create_development</span><span class='lparen'>(</span><span class='id identifier rubyid_proxy_uri'>proxy_uri</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>api_version:</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html" title="Azure::Storage::Queue::Default (module)">Default</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html#STG_VERSION-constant" title="Azure::Storage::Queue::Default::STG_VERSION (constant)">STG_VERSION</a></span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">QueueService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Azure::Storage::Queue::QueueService#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_service_options'>service_options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_from_connection_string-class_method">
  
    .<strong>create_from_connection_string</strong>(connection_string, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">Azure::Storage::Queue::QueueService</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates an instance of [Azure::Storage::Queue::QueueService] from
Environment Variables</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>connection_string</code>    - String. Please refer to <a
href="https://azure.microsoft.com/en-us/documentation/articles/storage-configure-connection-string">azure.microsoft.com/en-us/documentation/articles/storage-configure-connection-string</a>/.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">Azure::Storage::Queue::QueueService</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_from_connection_string'>create_from_connection_string</span><span class='lparen'>(</span><span class='id identifier rubyid_connection_string'>connection_string</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_service_options'>service_options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>client:</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Client</span><span class='op'>::</span><span class='id identifier rubyid_create_from_connection_string'>create_from_connection_string</span><span class='lparen'>(</span><span class='id identifier rubyid_connection_string'>connection_string</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>api_version:</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html" title="Azure::Storage::Queue::Default (module)">Default</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html#STG_VERSION-constant" title="Azure::Storage::Queue::Default::STG_VERSION (constant)">STG_VERSION</a></span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">QueueService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Azure::Storage::Queue::QueueService#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_service_options'>service_options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_from_env-class_method">
  
    .<strong>create_from_env</strong>(&amp;block)  &#x21d2; <tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">Azure::Storage::Queue::QueueService</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates an instance of [Azure::Storage::Queue::QueueService] from
Environment Variables</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">Azure::Storage::Queue::QueueService</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_from_env'>create_from_env</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_service_options'>service_options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>client:</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Client</span><span class='op'>::</span><span class='id identifier rubyid_create_from_env'>create_from_env</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>api_version:</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html" title="Azure::Storage::Queue::Default (module)">Default</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Default.html#STG_VERSION-constant" title="Azure::Storage::Queue::Default::STG_VERSION (constant)">STG_VERSION</a></span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Queue.html" title="Azure::Storage::Queue (module)">Queue</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Azure::Storage::Queue::QueueService (class)">QueueService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Azure::Storage::Queue::QueueService#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_service_options'>service_options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="clear_messages-instance_method">
  
    #<strong>clear_messages</strong>(queue_name, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Clears all messages from the queue.</p>

<p>If a queue contains a large number of messages, Clear Messages may time out
before all messages have been deleted. In this case the Queue service will
return status code 500 (Internal Server Error), with the additional error
code OperationTimedOut. If the operation times out, the client should
continue to retry Clear Messages until it succeeds, to ensure that all
messages have been deleted.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The name of the queue.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179454">msdn.microsoft.com/en-us/library/azure/dd179454</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244
245
246
247
248</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 242</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_messages'>clear_messages</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_messages_uri'>messages_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:delete</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_message-instance_method">
  
    #<strong>create_message</strong>(queue_name, message_text, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Adds a message to the queue and optionally sets a visibility
timeout for the message.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>   - String. The queue name.</p>
</li><li>
<p><code>message_text</code> - String. The message contents. Note that the
message content must be in a format that may be encoded with UTF-8.</p>
</li><li>
<p><code>options</code>      - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:visibility_timeout</code>        - Integer. Specifies the new
visibility timeout value, in seconds, relative to server</p>

<pre class="code ruby"><code class="ruby">time. The new value must be larger than or equal to 0, and cannot be larger than 7
days. The visibility timeout of a message cannot be set to a value later than the
expiry time. :visibility_timeout should be set to a value smaller than the
time-to-live value. If not specified, the default value is 0.</code></pre>
</li><li>
<p><code>:message_ttl</code>               - Integer. Specifies the
time-to-live interval for the message, in seconds. The maximum</p>

<pre class="code ruby"><code class="ruby">time-to-live allowed is 7 days. If not specified, the default time-to-live is 7 days.</code></pre>
</li><li>
<p><code>:encode</code>                    - Boolean. If set to true, the
message will be base64 encoded.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179346">msdn.microsoft.com/en-us/library/azure/dd179346</a></p>

<p>Returns a list of Azure::Storage::Queue::Message object containing only the
echo of request on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


465
466
467
468
469
470
471
472
473
474
475
476
477
478
479</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 465</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_message'>create_message</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_message_text'>message_text</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>visibilitytimeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:visibility_timeout</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:visibility_timeout</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>messagettl</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:message_ttl</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:message_ttl</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_messages_uri'>messages_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_message_to_xml'><span class='object_link'><a href="Serialization.html#message_to_xml-class_method" title="Azure::Storage::Queue::Serialization.message_to_xml (method)">message_to_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_message_text'>message_text</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:encode</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:post</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_queue_messages_from_xml'><span class='object_link'><a href="Serialization.html#queue_messages_from_xml-class_method" title="Azure::Storage::Queue::Serialization.queue_messages_from_xml (method)">queue_messages_from_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:decode</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_queue-instance_method">
  
    #<strong>create_queue</strong>(queue_name, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a new queue under the storage account.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:metadata</code>                  - Hash. A hash of user defined
metadata.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179342">msdn.microsoft.com/en-us/library/azure/dd179342</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272
273
274
275
276
277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_queue'>create_queue</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_uri'>queue_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_message-instance_method">
  
    #<strong>delete_message</strong>(queue_name, message_id, pop_receipt, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Deletes a specified message from the queue.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>message_id</code>                 - String. The id of the message.</p>
</li><li>
<p><code>pop_receipt</code>                - String. The valid pop receipt
value returned from an earlier call to the Get Messages or</p>

<pre class="code ruby"><code class="ruby">Update Message operation.</code></pre>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179347">msdn.microsoft.com/en-us/library/azure/dd179347</a></p>

<p>Returns nil on success</p>

<p>Remarks:</p>

<p>When a message is successfully deleted, it is immediately marked for
deletion and is no longer accessible to clients. The message is later
removed from the queue during garbage collection.</p>

<p>After a client retrieves a message with the Get Messages operation, the
client is expected to process and delete the message. To delete the
message, you must have two items of data returned in the response body of
the Get Messages operation:</p>
<ul><li>
<p>The message ID, an opaque GUID value that identifies the message in the
queue.</p>
</li><li>
<p>A valid pop receipt, an opaque value that indicates that the message has
been retrieved.</p>
</li></ul>

<p>The message ID is returned from the previous Get Messages operation. The
pop receipt is returned from the most recent Get Messages or Update Message
operation. In order for the Delete Message operation to succeed, the pop
receipt specified on the request must match the pop receipt returned from
the Get Messages or Update Message operation.</p>

<p>Pop receipts remain valid until one of the following events occurs:</p>
<ul><li>
<p>The message has expired.</p>
</li><li>
<p>The message has been deleted using the last pop receipt received either
from Get Messages or Update Message.</p>
</li><li>
<p>The invisibility time has elapsed and the message has been dequeued by a
Get Messages request. When the</p>
</li></ul>

<p>invisibility time elapses, the message becomes visible again. If it is
retrieved by another Get Messages request, the returned pop receipt can be
used to delete or update the message.</p>
<ul><li>
<p>The message has been updated with a new visibility timeout. When the
message is updated, a new pop receipt</p>
</li></ul>

<p>will be returned.</p>

<p>If the message has already been deleted when Delete Message is called, the
Queue service returns status code 404 (Not Found).</p>

<p>If a message with a matching pop receipt is not found, the service returns
status code 400 (Bad Request), with additional error information indicating
that the cause of the failure was a mismatched pop receipt.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


539
540
541
542
543
544
545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 539</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_message'>delete_message</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span> <span class='id identifier rubyid_pop_receipt'>pop_receipt</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>popreceipt</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pop_receipt'>pop_receipt</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_message_uri'>message_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:delete</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_queue-instance_method">
  
    #<strong>delete_queue</strong>(queue_name, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Deletes a queue.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179436">msdn.microsoft.com/en-us/library/azure/dd179436</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


298
299
300
301
302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 298</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_queue'>delete_queue</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_uri'>queue_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:delete</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_queue_acl-instance_method">
  
    #<strong>get_queue_acl</strong>(queue_name, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Gets the access control list (ACL) for the queue.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>             - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/jj159101">msdn.microsoft.com/en-us/library/azure/jj159101</a></p>

<p>Returns a list of Azure::Storage::Entity::SignedIdentifier instances</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


397
398
399
400
401
402
403
404
405
406
407</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 397</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_queue_acl'>get_queue_acl</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acl</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_queue_uri'>queue_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_signed_identifiers'>signed_identifiers</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_signed_identifiers'>signed_identifiers</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_signed_identifiers_from_xml'>signed_identifiers_from_xml</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span> <span class='op'>==</span> <span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;</span> <span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_signed_identifiers'>signed_identifiers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_queue_metadata-instance_method">
  
    #<strong>get_queue_metadata</strong>(queue_name, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Returns queue properties, including user-defined metadata.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>             - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179384">msdn.microsoft.com/en-us/library/azure/dd179384</a></p>

<p>Returns a tuple of (approximate_message_count, metadata)</p>
<ul><li>
<p>approximate_messages_count  - Integer. The approximate number of messages
in the queue. This number is not lower than the actual number of messages
in the queue, but could be higher.</p>
</li><li>
<p>metadata                    - Hash. The queue metadata (Default: {})</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


331
332
333
334
335
336
337
338
339
340
341
342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 331</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_queue_metadata'>get_queue_metadata</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>metadata</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_uri'>queue_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_approximate_messages_count'>approximate_messages_count</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-approximate-messages-count</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_metadata_from_headers'>metadata_from_headers</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_approximate_messages_count'>approximate_messages_count</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='id identifier rubyid_metadata'>metadata</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list_messages-instance_method">
  
    #<strong>list_messages</strong>(queue_name, visibility_timeout, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Retrieves one or more messages from the front of the queue.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>visibility_timeout</code>         - Integer. The new visibility
timeout value, in seconds, relative to server time.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:number_of_messages</code>        - Integer. How many messages to
return. (optional, Default: 1)</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:decode</code>                    - Boolean. Boolean value indicating
if the message should be base64 decoded.</p>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179474">msdn.microsoft.com/en-us/library/azure/dd179474</a></p>

<p>Returns a list of Azure::Storage::Entity::Queue::Message instances</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


605
606
607
608
609
610
611
612
613
614
615
616
617</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 605</span>

<span class='kw'>def</span> <span class='id identifier rubyid_list_messages'>list_messages</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_visibility_timeout'>visibility_timeout</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_number_of_messages'>number_of_messages</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_number_of_messages'>number_of_messages</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:number_of_messages</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:number_of_messages</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>visibilitytimeout</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_visibility_timeout'>visibility_timeout</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>numofmessages</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_number_of_messages'>number_of_messages</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_messages_uri'>messages_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_messages'>messages</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_queue_messages_from_xml'><span class='object_link'><a href="Serialization.html#queue_messages_from_xml-class_method" title="Azure::Storage::Queue::Serialization.queue_messages_from_xml (method)">queue_messages_from_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:decode</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_messages'>messages</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list_queues-instance_method">
  
    #<strong>list_queues</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Get a list of Queues from the server</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:prefix</code>                    - String. Filters the results to
return only containers</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_whose'>whose</span> <span class='id identifier rubyid_name'>name</span> <span class='id identifier rubyid_begins'>begins</span> <span class='id identifier rubyid_with'>with</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_specified'>specified</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='period'>.</span> <span class='lparen'>(</span><span class='id identifier rubyid_optional'>optional</span><span class='rparen'>)</span>
</code></pre>
</li><li>
<p><code>:marker</code>                    - String. An identifier the
specifies the portion of the</p>

<pre class="code ruby"><code class="ruby">list to be returned. This value comes from the property
Azure::Service::EnumerationResults.continuation_token when there
are more containers available than were returned. The
marker value may then be used here to request the next set
of list items. (optional)</code></pre>
</li><li>
<p><code>:max_results</code>               - Integer. Specifies the maximum
number of containers to return.</p>

<pre class="code ruby"><code class="ruby">If max_results is not specified, or is a value greater than
5,000, the server will return up to 5,000 items. If it is set
to a value less than or equal to zero, the server will return
status code 400 (Bad Request). (optional)</code></pre>
</li><li>
<p><code>:metadata</code>                  - Boolean. Specifies whether or not
to return the container metadata.</p>

<pre class="code ruby"><code class="ruby"><span class='lparen'>(</span><span class='id identifier rubyid_optional'>optional</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Default.html" title="Azure::Storage::Queue::Default (module)">Default</a></span></span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>             - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li></ul>

<p>NOTE: Metadata requested with the :metadata parameter must have been stored
in accordance with the naming restrictions imposed by the 2009-09-19
version of the queue service. Beginning with that version, all metadata
names must adhere to the naming conventions for C# identifiers.</p>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179466">msdn.microsoft.com/en-us/library/azure/dd179466</a></p>

<p>Any metadata with invalid names which were previously stored, will be
returned with the key x-ms-invalid-name in the metadata hash. This may
contain multiple values and be an Array (vs a String if it only contains a
single value).</p>

<p>Returns an Azure::Storage::Common::EnumerationResults</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210
211
212
213
214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_list_queues'>list_queues</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>prefix</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:prefix</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:prefix</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>marker</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:marker</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:marker</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>maxresults</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_results</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_results</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>include</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>metadata</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_collection_uri'>collection_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_queue_enumeration_results_from_xml'><span class='object_link'><a href="Serialization.html#queue_enumeration_results_from_xml-class_method" title="Azure::Storage::Queue::Serialization.queue_enumeration_results_from_xml (method)">queue_enumeration_results_from_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="peek_messages-instance_method">
  
    #<strong>peek_messages</strong>(queue_name, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Retrieves one or more messages from the front of the queue, without
changing the message visibility.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:number_of_messages</code>        - Integer. How many messages to
return. (optional, Default: 1)</p>
</li><li>
<p><code>:decode</code>                    - Boolean. Boolean value indicating
if the message should be base64 decoded.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>             - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179472">msdn.microsoft.com/en-us/library/azure/dd179472</a></p>

<p>Returns a list of Azure::Storage::Entity::Queue::Message instances</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


570
571
572
573
574
575
576
577
578
579
580
581
582
583</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 570</span>

<span class='kw'>def</span> <span class='id identifier rubyid_peek_messages'>peek_messages</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_number_of_messages'>number_of_messages</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_number_of_messages'>number_of_messages</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:number_of_messages</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:number_of_messages</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>peekonly</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>numofmessages</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_number_of_messages'>number_of_messages</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_messages_uri'>messages_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_messages'>messages</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_queue_messages_from_xml'><span class='object_link'><a href="Serialization.html#queue_messages_from_xml-class_method" title="Azure::Storage::Queue::Serialization.queue_messages_from_xml (method)">queue_messages_from_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:decode</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_messages'>messages</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_queue_acl-instance_method">
  
    #<strong>set_queue_acl</strong>(queue_name, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Sets the access control list (ACL) for the queue.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:signed_identifiers</code>        - Array. A list of
Azure::Storage::Entity::SignedIdentifier instances</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/jj159099">msdn.microsoft.com/en-us/library/azure/jj159099</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


427
428
429
430
431
432
433
434
435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 427</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_queue_acl'>set_queue_acl</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>acl</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_uri'>queue_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_signed_identifiers_to_xml'>signed_identifiers_to_xml</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:signed_identifiers</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:signed_identifiers</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:signed_identifiers</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>

  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_queue_metadata-instance_method">
  
    #<strong>set_queue_metadata</strong>(queue_name, metadata, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Sets user-defined metadata on the queue. To delete queue metadata,
call this API with an empty hash in the metadata parameter.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>metadata</code>                   - Hash. A hash of user defined
metadata</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179348">msdn.microsoft.com/en-us/library/azure/dd179348</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


365
366
367
368
369
370
371
372
373
374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 365</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_queue_metadata'>set_queue_metadata</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>metadata</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_uri'>queue_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span><span class='lparen'>(</span><span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_message-instance_method">
  
    #<strong>update_message</strong>(queue_name, message_id, pop_receipt, message_text, visibility_timeout, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Adds a message to the queue and optionally sets a visibility
timeout for the message.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>queue_name</code>                 - String. The queue name.</p>
</li><li>
<p><code>message_id</code>                 - String. The id of the message.</p>
</li><li>
<p><code>pop_receipt</code>                - String. The valid pop receipt
value returned from an earlier call to the Get Messages or</p>

<pre class="code ruby"><code class="ruby">update Message operation.</code></pre>
</li><li>
<p><code>message_text</code>               - String. The message contents.
Note that the message content must be in a format that may</p>

<pre class="code ruby"><code class="ruby">be encoded with UTF-8.</code></pre>
</li><li>
<p><code>visibility_timeout</code>         - Integer. The new visibility
timeout value, in seconds, relative to server time.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:encode</code>                    - Boolean. If set to true, the
message will be base64 encoded.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/hh452234">msdn.microsoft.com/en-us/library/azure/hh452234</a></p>

<p>Returns a tuple of (pop_receipt, time_next_visible)</p>
<ul><li>
<p>pop_receipt        - String. The pop receipt of the queue message.</p>
</li><li>
<p>time_next_visible  - String. A UTC date/time value that represents when the
message will be visible on the queue.</p>
</li></ul>

<p>Remarks:</p>

<p>An Update Message operation will fail if the specified message does not
exist in the queue, or if the specified pop receipt does not match the
message.</p>

<p>A pop receipt is returned by the Get Messages operation or the Update
Message operation. Pop receipts remain valid until one of the following
events occurs:</p>
<ul><li>
<p>The message has expired.</p>
</li><li>
<p>The message has been deleted using the last pop receipt received either
from Get Messages or</p>
</li></ul>

<p>Update Message.</p>
<ul><li>
<p>The invisibility time has elapsed and the message has been dequeued by a
Get Messages request. When</p>
</li></ul>

<p>the invisibility time elapses, the message becomes visible again. If it is
retrieved by another Get Messages request, the returned pop receipt can be
used to delete or update the message.</p>
<ul><li>
<p>The message has been updated with a new visibility timeout. When the
message is updated, a new pop</p>
</li></ul>

<p>receipt will be returned.</p>

<p>The Update Message operation can be used to continually extend the
invisibility of a queue message. This functionality can be useful if you
want a worker role to lease a queue message. For example, if a worker
role calls Get Messages and recognizes that it needs more time to process a
message, it can continually extend the message&#39;s invisibility until it
is processed. If the worker role were to fail during processing, eventually
the message would become visible again and another worker role could
process it.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


672
673
674
675
676
677
678
679
680
681
682
683</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'queue/lib/azure/storage/queue/queue_service.rb', line 672</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_message'>update_message</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span> <span class='id identifier rubyid_pop_receipt'>pop_receipt</span><span class='comma'>,</span> <span class='id identifier rubyid_message_text'>message_text</span><span class='comma'>,</span> <span class='id identifier rubyid_visibility_timeout'>visibility_timeout</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>visibilitytimeout</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_visibility_timeout'>visibility_timeout</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>popreceipt</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pop_receipt'>pop_receipt</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_message_uri'>message_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Serialization.html" title="Azure::Storage::Queue::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_message_to_xml'><span class='object_link'><a href="Serialization.html#message_to_xml-class_method" title="Azure::Storage::Queue::Serialization.message_to_xml (method)">message_to_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_message_text'>message_text</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:encode</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_pop_receipt'>new_pop_receipt</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-popreceipt</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_time_next_visible'>time_next_visible</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-time-next-visible</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_new_pop_receipt'>new_pop_receipt</span><span class='comma'>,</span> <span class='id identifier rubyid_time_next_visible'>time_next_visible</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Jan 11 16:12:05 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.4.1).
</div>

    </div>
  </body>
</html>