<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Azure::Storage::Blob
  
    &mdash; Documentation by YARD 0.9.24
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Azure::Storage::Blob";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span>
     &raquo; 
    <span class="title">Blob</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Azure::Storage::Blob
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Common::Service</dd>
  </dl>
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="Blob/BlobService.html" title="Azure::Storage::Blob::BlobService (class)">BlobService</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>blob/lib/azure/storage/blob/container.rb<span class="defines">,<br />
  blob/lib/azure/storage/blob/version.rb,<br /> blob/lib/azure/storage/blob/autoload.rb,<br /> blob/lib/azure/storage/blob/blob_service.rb,<br /> blob/lib/azure/storage/blob/serialization.rb,<br /> blob/lib/azure/storage/blob/default.rb,<br /> blob/lib/azure/storage/blob/append.rb,<br /> blob/lib/azure/storage/blob/block.rb,<br /> blob/lib/azure/storage/blob/page.rb,<br /> blob/lib/azure/storage/blob/blob.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.</p>
<hr>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Blob/BlobConstants.html" title="Azure::Storage::Blob::BlobConstants (module)">BlobConstants</a></span>, <span class='object_link'><a href="Blob/BlobErrorCodeStrings.html" title="Azure::Storage::Blob::BlobErrorCodeStrings (module)">BlobErrorCodeStrings</a></span>, <span class='object_link'><a href="Blob/Container.html" title="Azure::Storage::Blob::Container (module)">Container</a></span>, <span class='object_link'><a href="Blob/Default.html" title="Azure::Storage::Blob::Default (module)">Default</a></span>, <span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Blob/Blob.html" title="Azure::Storage::Blob::Blob (class)">Blob</a></span>, <span class='object_link'><a href="Blob/BlobService.html" title="Azure::Storage::Blob::BlobService (class)">BlobService</a></span>, <span class='object_link'><a href="Blob/Block.html" title="Azure::Storage::Blob::Block (class)">Block</a></span>, <span class='object_link'><a href="Blob/Version.html" title="Azure::Storage::Blob::Version (class)">Version</a></span>
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#abort_copy_blob-instance_method" title="#abort_copy_blob (instance method)">#<strong>abort_copy_blob</strong>(container, blob, copy_id, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Aborts a pending Copy Blob operation and leaves a destination blob
with zero length and full metadata.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acquire_blob_lease-instance_method" title="#acquire_blob_lease (instance method)">#<strong>acquire_blob_lease</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Establishes an exclusive write lock on a blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#append_blob_block-instance_method" title="#append_blob_block (instance method)">#<strong>append_blob_block</strong>(container, blob, content, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Commits a new block of data to the end of an existing append blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#break_blob_lease-instance_method" title="#break_blob_lease (instance method)">#<strong>break_blob_lease</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Breaks the lease, if the blob has an active lease.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#change_blob_lease-instance_method" title="#change_blob_lease (instance method)">#<strong>change_blob_lease</strong>(container, blob, lease, proposed_lease, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Change the lease ID.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_blob_pages-instance_method" title="#clear_blob_pages (instance method)">#<strong>clear_blob_pages</strong>(container, blob, start_range, end_range, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Clears a range of pages from the blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#commit_blob_blocks-instance_method" title="#commit_blob_blocks (instance method)">#<strong>commit_blob_blocks</strong>(container, blob, block_list, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Commits existing blob blocks to a blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_blob-instance_method" title="#copy_blob (instance method)">#<strong>copy_blob</strong>(destination_container, destination_blob, source_container, source_blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Copies a source blob to a destination blob within the same storage
account.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_blob_from_uri-instance_method" title="#copy_blob_from_uri (instance method)">#<strong>copy_blob_from_uri</strong>(destination_container, destination_blob, source_uri, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Copies a source blob or file to a destination blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_append_blob-instance_method" title="#create_append_blob (instance method)">#<strong>create_append_blob</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a new append blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_append_blob_from_content-instance_method" title="#create_append_blob_from_content (instance method)">#<strong>create_append_blob_from_content</strong>(container, blob, content, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a new append blob with given content.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_blob_snapshot-instance_method" title="#create_blob_snapshot (instance method)">#<strong>create_blob_snapshot</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a snapshot of a blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_block_blob-instance_method" title="#create_block_blob (instance method)">#<strong>create_block_blob</strong>(container, blob, content, options = {})  &#x21d2; Object </a>
    

    
      (also: #create_block_blob_from_content)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a new block blob or updates the content of an existing
block blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_page_blob-instance_method" title="#create_page_blob (instance method)">#<strong>create_page_blob</strong>(container, blob, length, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a new page blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_page_blob_from_content-instance_method" title="#create_page_blob_from_content (instance method)">#<strong>create_page_blob_from_content</strong>(container, blob, length, content, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a new page blob filled with given content.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_blob-instance_method" title="#delete_blob (instance method)">#<strong>delete_blob</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Deletes a blob or blob snapshot.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_blob-instance_method" title="#get_blob (instance method)">#<strong>get_blob</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Reads or downloads a blob from the system, including its metadata
and properties.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_blob_metadata-instance_method" title="#get_blob_metadata (instance method)">#<strong>get_blob_metadata</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Returns metadata on the blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_blob_properties-instance_method" title="#get_blob_properties (instance method)">#<strong>get_blob_properties</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Returns all properties and metadata on the blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#incremental_copy_blob-instance_method" title="#incremental_copy_blob (instance method)">#<strong>incremental_copy_blob</strong>(destination_container, destination_blob, source_uri, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Copies a snapshot of the source page blob to a destination page
blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_blob_blocks-instance_method" title="#list_blob_blocks (instance method)">#<strong>list_blob_blocks</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Retrieves the list of blocks that have been uploaded as part of a
block blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_page_blob_ranges-instance_method" title="#list_page_blob_ranges (instance method)">#<strong>list_page_blob_ranges</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Returns a list of active page ranges for a page blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put_blob_block-instance_method" title="#put_blob_block (instance method)">#<strong>put_blob_block</strong>(container, blob, block_id, content, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a new block to be committed as part of a block blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put_blob_pages-instance_method" title="#put_blob_pages (instance method)">#<strong>put_blob_pages</strong>(container, blob, start_range, end_range, content, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Creates a range of pages in a page blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#release_blob_lease-instance_method" title="#release_blob_lease (instance method)">#<strong>release_blob_lease</strong>(container, blob, lease, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Releases the lease.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#renew_blob_lease-instance_method" title="#renew_blob_lease (instance method)">#<strong>renew_blob_lease</strong>(container, blob, lease, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Renews the lease.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#resize_page_blob-instance_method" title="#resize_page_blob (instance method)">#<strong>resize_page_blob</strong>(container, blob, size, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Resizes a page blob to the specified size.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_blob_metadata-instance_method" title="#set_blob_metadata (instance method)">#<strong>set_blob_metadata</strong>(container, blob, metadata, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Sets metadata headers on the blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_blob_properties-instance_method" title="#set_blob_properties (instance method)">#<strong>set_blob_properties</strong>(container, blob, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Sets system properties defined for a blob.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_sequence_number-instance_method" title="#set_sequence_number (instance method)">#<strong>set_sequence_number</strong>(container, blob, action, number, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Sets a page blob&#39;s sequence number.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="abort_copy_blob-instance_method">
  
    #<strong>abort_copy_blob</strong>(container, blob, copy_id, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Aborts a pending Copy Blob operation and leaves a destination blob
with zero length and full metadata.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>             - String. The destination container
name.</p>
</li><li>
<p><code>blob</code>                  - String. The destination blob name.</p>
</li><li>
<p><code>copy_id</code>               - String. The copy identifier returned
in the copy blob operation.</p>
</li><li>
<p><code>options</code>               - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:lease_id</code>             - String. The lease id if the
destination blob has an active infinite lease</p>
</li><li>
<p><code>:timeout</code>              - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>           - String. Provides a client-generated,
opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li></ul>

<p>See <a
href="https://msdn.microsoft.com/en-us/library/azure/jj159098.aspx">msdn.microsoft.com/en-us/library/azure/jj159098.aspx</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 855</span>

<span class='kw'>def</span> <span class='id identifier rubyid_abort_copy_blob'>abort_copy_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_copy_id'>copy_id</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>copy</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>copyid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_copy_id'>copy_id</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span><span class='semicolon'>;</span>
  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-copy-action</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abort</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="acquire_blob_lease-instance_method">
  
    #<strong>acquire_blob_lease</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Establishes an exclusive write lock on a blob. The lock duration
can be 15 to 60 seconds, or can be infinite. To write to a locked blob, a
client must provide a lease ID.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:duration</code>                  - Integer. Default -1. Specifies
the duration of the lease, in seconds, or negative one (-1)</p>

<pre class="code ruby"><code class="ruby">for a lease that never expires. A non-infinite lease can be between 15 and 60 seconds. (optional)</code></pre>
</li><li>
<p><code>:proposed_lease_id</code>         - String. Proposed lease ID, in a
GUID string format. The Blob service returns 400 (Invalid request)</p>

<pre class="code ruby"><code class="ruby">if the proposed lease ID is not in the correct format. (optional)</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to acquire the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to acquire the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to acquire the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to acquire the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:origin</code>                    - String. Optional. Specifies the
origin from which the request is issued. The presence of this header
results</p>

<pre class="code ruby"><code class="ruby">in cross-origin resource sharing headers on the response.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691972.aspx">msdn.microsoft.com/en-us/library/azure/ee691972.aspx</a></p>

<p>Returns a String of the new unique lease id. While the lease is active, you
must include the lease ID with any request to write to the blob, or to
renew, change, or release the lease.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


460
461
462</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 460</span>

<span class='kw'>def</span> <span class='id identifier rubyid_acquire_blob_lease'>acquire_blob_lease</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_acquire_lease'>acquire_lease</span> <span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="append_blob_block-instance_method">
  
    #<strong>append_blob_block</strong>(container, blob, content, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Commits a new block of data to the end of an existing append blob.
This operation is permitted only on blobs created with the
create_append_blob API.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>content</code>                    - IO or String. The content of the
blob.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:content_md5</code>               - String. Content MD5 for the
request contents.</p>
</li><li>
<p><code>:max_size</code>                  - Integer. The max length in bytes
permitted for the append blob</p>
</li><li>
<p><code>:append_position</code>           - Integer. A number indicating the
byte offset to compare. It will succeed only if the append position is
equal to this number</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to append a block only if</p>

<pre class="code ruby"><code class="ruby">the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to append a block only if</p>

<pre class="code ruby"><code class="ruby">the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to append a block only if</p>

<pre class="code ruby"><code class="ruby">the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to append a block only if</p>

<pre class="code ruby"><code class="ruby">the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an</p>

<pre class="code ruby"><code class="ruby">active lease, specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/mt427365.aspx">msdn.microsoft.com/en-us/library/azure/mt427365.aspx</a></p>

<p>Returns a Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/append.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_append_blob_block'>append_blob_block</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>appendblock</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-MD5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_md5</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-condition-maxsize</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_size</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-condition-appendpos</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:append_position</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_blob_from_headers'><span class='object_link'><a href="Blob/Serialization.html#blob_from_headers-class_method" title="Azure::Storage::Blob::Serialization.blob_from_headers (method)">blob_from_headers</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_blob'>blob</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="break_blob_lease-instance_method">
  
    #<strong>break_blob_lease</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Breaks the lease, if the blob has an active lease. Once a lease is
broken, it cannot be renewed. Any authorized request can break the lease;
the request is not required to specify a matching lease ID. When a lease is
broken, the lease break period is allowed to elapse, during which time no
lease operation except break and release can be performed on the blob. When
a lease is successfully broken, the response indicates the interval in
seconds until a new lease can be acquired.</p>

<p>A lease that has been broken can also be released, in which case another
client may immediately acquire the lease on the blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:break_period</code>              - Integer. The proposed duration of
seconds that the lease should continue before it is</p>

<pre class="code ruby"><code class="ruby">broken, between 0 and 60 seconds. This break period is only used if it is shorter than
the time remaining on the lease. If longer, the time remaining on the lease is used. A
new lease will not be available before the break period has expired, but the lease may
be held for longer than the break period.

If this option is not used, a fixed-duration lease breaks after the remaining lease
period elapses, and an infinite lease breaks immediately.</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to break the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to break the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to break the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to break the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:origin</code>                    - String. Optional. Specifies the
origin from which the request is issued. The presence of this header
results</p>

<pre class="code ruby"><code class="ruby">in cross-origin resource sharing headers on the response.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691972.aspx">msdn.microsoft.com/en-us/library/azure/ee691972.aspx</a></p>

<p>Returns an Integer of the remaining lease time. This value is the
approximate time remaining in the lease period, in seconds. This header is
returned only for a successful request to break the lease. If the break is
immediate, 0 is returned.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


627
628
629</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 627</span>

<span class='kw'>def</span> <span class='id identifier rubyid_break_blob_lease'>break_blob_lease</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_break_lease'>break_lease</span> <span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="change_blob_lease-instance_method">
  
    #<strong>change_blob_lease</strong>(container, blob, lease, proposed_lease, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Change the lease ID.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>lease</code>                      - String. The existing lease id.</p>
</li><li>
<p><code>proposed_lease</code>             - String. Proposed lease ID, in a
GUID string format. The Blob service returns 400 (Invalid request)</p>

<pre class="code ruby"><code class="ruby">if the proposed lease ID is not in the correct format. (optional).</code></pre>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to change the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to change the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to change the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to change the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:origin</code>                    - String. Optional. Specifies the
origin from which the request is issued. The presence of this header
results</p>

<pre class="code ruby"><code class="ruby">in cross-origin resource sharing headers on the response.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691972.aspx">msdn.microsoft.com/en-us/library/azure/ee691972.aspx</a></p>

<p>Returns the changed lease id</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


537
538
539</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 537</span>

<span class='kw'>def</span> <span class='id identifier rubyid_change_blob_lease'>change_blob_lease</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_lease'>lease</span><span class='comma'>,</span> <span class='id identifier rubyid_proposed_lease'>proposed_lease</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_change_lease'>change_lease</span> <span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_lease'>lease</span><span class='comma'>,</span> <span class='id identifier rubyid_proposed_lease'>proposed_lease</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_blob_pages-instance_method">
  
    #<strong>clear_blob_pages</strong>(container, blob, start_range, end_range, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Clears a range of pages from the blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. Name of container.</p>
</li><li>
<p><code>blob</code>                       - String. Name of blob.</p>
</li><li>
<p><code>start_range</code>                - Integer. Position of first byte
of first page.</p>
</li><li>
<p><code>end_range</code>                  - Integer. Position of last byte of
of last page.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to clear the page only if</p>

<pre class="code ruby"><code class="ruby">the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to clear the page only if</p>

<pre class="code ruby"><code class="ruby">the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to clear the page only if</p>

<pre class="code ruby"><code class="ruby">the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to clear the page only if</p>

<pre class="code ruby"><code class="ruby">the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691975.aspx">msdn.microsoft.com/en-us/library/azure/ee691975.aspx</a></p>

<p>Returns Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/page.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_blob_pages'>clear_blob_pages</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_start_range'>start_range</span><span class='comma'>,</span> <span class='id identifier rubyid_end_range'>end_range</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>page</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-range</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bytes=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_start_range'>start_range</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_range'>end_range</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-page-write</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>clear</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># clear default content type
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># set optional headers
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_blob_from_headers'><span class='object_link'><a href="Blob/Serialization.html#blob_from_headers-class_method" title="Azure::Storage::Blob::Serialization.blob_from_headers (method)">blob_from_headers</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_blob'>blob</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="commit_blob_blocks-instance_method">
  
    #<strong>commit_blob_blocks</strong>(container, blob, block_list, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Commits existing blob blocks to a blob.</p>

<p>This method writes a blob by specifying the list of block IDs that make up
the blob. In order to be written as part of a blob, a block must have been
successfully written to the server in a prior put_blob_block method.</p>

<p>You can call Put Block List to update a blob by uploading only those blocks
that have changed, then committing the new and existing blocks together.
You can do this by specifying whether to commit a block from the committed
block list or from the uncommitted block list, or to commit the most
recently uploaded version of the block, whichever list it may belong to.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>   - String. The container name.</p>
</li><li>
<p><code>blob</code>        - String. The blob name.</p>
</li><li>
<p><code>block_list</code>  - Array. A ordered list of lists in the following
format:</p>
<dl class="rdoc-list label-list"><dt> [“block_id1”, :committed], [“block_id2”, :uncommitted], [“block_id3”], [“block_id4”, :committed]… 
<dd>
<p>The first element of the inner list is the block_id, the second is optional
and can be either :committed or :uncommitted to indicate in which group of
blocks the id should be looked for. If it is omitted, the latest of either
group will be used.</p>
</dd></dl>
</li><li>
<p><code>options</code>     - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:transactional_md5</code>         - String. Content MD5 for the
request contents (not the blob contents!)</p>
</li><li>
<p><code>:content_type</code>              - String. Content type for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_encoding</code>          - String. Content encoding for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_language</code>          - String. Content language for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_md5</code>               - String. Content MD5 for the blob.
Will be saved with blob.</p>
</li><li>
<p><code>:cache_control</code>             - String. Cache control for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_disposition</code>       - String. Conveys additional
information about how to process the response payload,</p>

<pre class="code ruby"><code class="ruby">and also can be used to attach additional metadata</code></pre>
</li><li>
<p><code>:metadata</code>                  - Hash. Custom metadata values to
store with the blob.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an</p>

<pre class="code ruby"><code class="ruby">active lease, specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>This operation also supports the use of conditional headers to commit the
block list if a specified condition is met. For more information, see <a
href="https://msdn.microsoft.com/en-us/library/azure/dd179371.aspx">msdn.microsoft.com/en-us/library/azure/dd179371.aspx</a></p>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179467.aspx">msdn.microsoft.com/en-us/library/azure/dd179467.aspx</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/block.rb', line 200</span>

<span class='kw'>def</span> <span class='id identifier rubyid_commit_blob_blocks'>commit_blob_blocks</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_block_list'>block_list</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>blocklist</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-MD5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:transactional_md5</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-encoding</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_encoding</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-language</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_language</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-md5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_md5</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-cache-control</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cache_control</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-disposition</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_disposition</span><span class='rbracket'>]</span>

    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Default.html" title="Azure::Storage::Blob::Default (module)">Default</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Blob/Default.html#CONTENT_TYPE_VALUE-constant" title="Azure::Storage::Blob::Default::CONTENT_TYPE_VALUE (constant)">CONTENT_TYPE_VALUE</a></span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_block_list_to_xml'><span class='object_link'><a href="Blob/Serialization.html#block_list_to_xml-class_method" title="Azure::Storage::Blob::Serialization.block_list_to_xml (method)">block_list_to_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_block_list'>block_list</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="copy_blob-instance_method">
  
    #<strong>copy_blob</strong>(destination_container, destination_blob, source_container, source_blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Copies a source blob to a destination blob within the same storage
account.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>destination_container</code>      - String. The destination container
name to copy to.</p>
</li><li>
<p><code>destination_blob</code>           - String. The destination blob name
to copy to.</p>
</li><li>
<p><code>source_container</code>           - String. The source container name
to copy from.</p>
</li><li>
<p><code>source_blob</code>                - String. The source blob name to
copy from.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:source_snapshot</code>            - String. A snapshot id for the
source blob</p>
</li><li>
<p><code>:metadata</code>                   - Hash. Custom metadata values to
store with the copy. If this parameter is not</p>

<pre class="code ruby"><code class="ruby">specified, the operation will copy the source blob metadata to the destination
blob. If this parameter is specified, the destination blob is created with the
specified metadata, and metadata is not copied from the source blob.</code></pre>
</li><li>
<p><code>:source_if_modified_since</code>   - String. A DateTime value.
Specify this option to write the page only if the source blob</p>

<pre class="code ruby"><code class="ruby">has been modified since the specified date/time. If the blob has not been
modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:source_if_unmodified_since</code> - String. A DateTime value.
Specify this option to write the page only if the source blob</p>

<pre class="code ruby"><code class="ruby">has not been modified since the specified date/time. If the blob has been
modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:source_if_match</code>            - String. An ETag value. Specify
an ETag value to write the page only if the source blob&#39;s</p>

<pre class="code ruby"><code class="ruby">ETag value matches the value specified. If the values do not match, the Blob
service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:source_if_none_match</code>       - String. An ETag value. Specify
an ETag value to write the page only if the source blob&#39;s</p>

<pre class="code ruby"><code class="ruby">ETag value does not match the value specified. If the values are identical, the
Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:dest_if_modified_since</code>     - String. A DateTime value.
Specify this option to write the page only if the destination</p>

<pre class="code ruby"><code class="ruby">blob has been modified since the specified date/time. If the blob has not been
modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:dest_if_unmodified_since</code>   - String. A DateTime value.
Specify this option to write the page only if the destination</p>

<pre class="code ruby"><code class="ruby">blob has not been modified since the specified date/time. If the blob has been
modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:dest_if_match</code>              - String. An ETag value. Specify
an ETag value to write the page only if the destination</p>

<pre class="code ruby"><code class="ruby">blob&#39;s ETag value matches the value specified. If the values do not match, the
Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:dest_if_none_match</code>         - String. An ETag value. Specify
an ETag value to write the page only if the destination</p>

<pre class="code ruby"><code class="ruby">blob&#39;s ETag value does not match the value specified. If the values are
identical, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:timeout</code>                    - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                 - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:lease_id</code>                   - String. Required if the
destination blob has an active lease. The lease ID specified for</p>

<pre class="code ruby"><code class="ruby">this header must match the lease ID of the destination blob. If the request does not include
the lease ID or it is not valid, the operation fails with status code 412 (Precondition Failed).
If this header is specified and the destination blob does not currently have an active lease,
the operation will also fail with status code 412 (Precondition Failed).
In version 2012-02-12 and newer, this value must specify an active, infinite lease for a
leased blob. A finite-duration lease ID fails with 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd894037.aspx">msdn.microsoft.com/en-us/library/azure/dd894037.aspx</a></p>

<p>Returns a tuple of (copy_id, copy_status).</p>
<ul><li>
<p><code>copy_id</code>                    - String identifier for this copy
operation. Use with get_blob or get_blob_properties to check</p>

<pre class="code ruby"><code class="ruby">the status of this copy operation, or pass to abort_copy_blob to abort a pending copy.</code></pre>
</li><li>
<p><code>copy_status</code>                - String. The state of the copy
operation, with these values:</p>

<pre class="code ruby"><code class="ruby">&quot;success&quot; - The copy completed successfully.
&quot;pending&quot; - The copy is in progress.</code></pre>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


829
830
831
832
833</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 829</span>

<span class='kw'>def</span> <span class='id identifier rubyid_copy_blob'>copy_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_destination_container'>destination_container</span><span class='comma'>,</span> <span class='id identifier rubyid_destination_blob'>destination_blob</span><span class='comma'>,</span> <span class='id identifier rubyid_source_container'>source_container</span><span class='comma'>,</span> <span class='id identifier rubyid_source_blob'>source_blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_source_blob_uri'>source_blob_uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_source_container'>source_container</span><span class='comma'>,</span> <span class='id identifier rubyid_source_blob'>source_blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:source_snapshot</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>snapshot</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:source_snapshot</span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_copy_blob_from_uri'>copy_blob_from_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_destination_container'>destination_container</span><span class='comma'>,</span> <span class='id identifier rubyid_destination_blob'>destination_blob</span><span class='comma'>,</span> <span class='id identifier rubyid_source_blob_uri'>source_blob_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="copy_blob_from_uri-instance_method">
  
    #<strong>copy_blob_from_uri</strong>(destination_container, destination_blob, source_uri, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Copies a source blob or file to a destination blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>destination_container</code>      - String. The destination container
name to copy to.</p>
</li><li>
<p><code>destination_blob</code>           - String. The destination blob name
to copy to.</p>
</li><li>
<p><code>source_uri</code>                 - String. The source blob or file
URI to copy from.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:source_snapshot</code>            - String. A snapshot id for the
source blob</p>
</li><li>
<p><code>:metadata</code>                   - Hash. Custom metadata values to
store with the copy. If this parameter is not</p>

<pre class="code ruby"><code class="ruby">specified, the operation will copy the source blob metadata to the destination
blob. If this parameter is specified, the destination blob is created with the
specified metadata, and metadata is not copied from the source blob.</code></pre>
</li><li>
<p><code>:source_if_modified_since</code>   - String. A DateTime value.
Specify this option to write the page only if the source blob</p>

<pre class="code ruby"><code class="ruby">has been modified since the specified date/time. If the blob has not been
modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:source_if_unmodified_since</code> - String. A DateTime value.
Specify this option to write the page only if the source blob</p>

<pre class="code ruby"><code class="ruby">has not been modified since the specified date/time. If the blob has been
modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:source_if_match</code>            - String. An ETag value. Specify
an ETag value to write the page only if the source blob&#39;s</p>

<pre class="code ruby"><code class="ruby">ETag value matches the value specified. If the values do not match, the Blob
service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:source_if_none_match</code>       - String. An ETag value. Specify
an ETag value to write the page only if the source blob&#39;s</p>

<pre class="code ruby"><code class="ruby">ETag value does not match the value specified. If the values are identical, the
Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:dest_if_modified_since</code>     - String. A DateTime value.
Specify this option to write the page only if the destination</p>

<pre class="code ruby"><code class="ruby">blob has been modified since the specified date/time. If the blob has not been
modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:dest_if_unmodified_since</code>   - String. A DateTime value.
Specify this option to write the page only if the destination</p>

<pre class="code ruby"><code class="ruby">blob has not been modified since the specified date/time. If the blob has been
modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:dest_if_match</code>              - String. An ETag value. Specify
an ETag value to write the page only if the destination</p>

<pre class="code ruby"><code class="ruby">blob&#39;s ETag value matches the value specified. If the values do not match, the
Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:dest_if_none_match</code>         - String. An ETag value. Specify
an ETag value to write the page only if the destination</p>

<pre class="code ruby"><code class="ruby">blob&#39;s ETag value does not match the value specified. If the values are
identical, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:timeout</code>                    - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                 - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:lease_id</code>                   - String. Required if the
destination blob has an active lease. The lease ID specified for</p>

<pre class="code ruby"><code class="ruby">this header must match the lease ID of the destination blob. If the request does not include
the lease ID or it is not valid, the operation fails with status code 412 (Precondition Failed).
If this header is specified and the destination blob does not currently have an active lease,
the operation will also fail with status code 412 (Precondition Failed).
In version 2012-02-12 and newer, this value must specify an active, infinite lease for a
leased blob. A finite-duration lease ID fails with 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd894037.aspx">msdn.microsoft.com/en-us/library/azure/dd894037.aspx</a></p>

<p>Returns a tuple of (copy_id, copy_status).</p>
<ul><li>
<p><code>copy_id</code>                    - String identifier for this copy
operation. Use with get_blob or get_blob_properties to check</p>

<pre class="code ruby"><code class="ruby">the status of this copy operation, or pass to abort_copy_blob to abort a pending copy.</code></pre>
</li><li>
<p><code>copy_status</code>                - String. The state of the copy
operation, with these values:</p>

<pre class="code ruby"><code class="ruby">&quot;success&quot; - The copy completed successfully.
&quot;pending&quot; - The copy is in progress.</code></pre>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 748</span>

<span class='kw'>def</span> <span class='id identifier rubyid_copy_blob_from_uri'>copy_blob_from_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_destination_container'>destination_container</span><span class='comma'>,</span> <span class='id identifier rubyid_destination_blob'>destination_blob</span><span class='comma'>,</span> <span class='id identifier rubyid_source_uri'>source_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_destination_container'>destination_container</span><span class='comma'>,</span> <span class='id identifier rubyid_destination_blob'>destination_blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-copy-source</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_source_uri'>source_uri</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-copy-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-copy-status</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_append_blob-instance_method">
  
    #<strong>create_append_blob</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a new append blob. Note that calling create_append_blob to
create an append blob only initializes the blob. To add content to an
append blob, call append_blob_blocks method.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:content_type</code>              - String. Content type for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_encoding</code>          - String. Content encoding for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_language</code>          - String. Content language for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_md5</code>               - String. Content MD5 for the blob.
Will be saved with blob.</p>
</li><li>
<p><code>:cache_control</code>             - String. Cache control for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_disposition</code>       - String. Conveys additional
information about how to process the response payload,</p>

<pre class="code ruby"><code class="ruby">and also can be used to attach additional metadata</code></pre>
</li><li>
<p><code>:metadata</code>                  - Hash. Custom metadata values to
store with the blob.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an active lease,</p>

<pre class="code ruby"><code class="ruby">specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179451.aspx">msdn.microsoft.com/en-us/library/azure/dd179451.aspx</a></p>

<p>Returns a Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/append.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_append_blob'>create_append_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='comment'># set x-ms-blob-type to AppendBlob
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AppendBlob</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># ensure content-length is 0
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Length</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>0</span>

  <span class='comment'># set the rest of the optional headers
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-encoding</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_encoding</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-language</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_language</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-md5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_md5</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-cache-control</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cache_control</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-disposition</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_disposition</span><span class='rbracket'>]</span>

  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Default.html" title="Azure::Storage::Blob::Default (module)">Default</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Blob/Default.html#CONTENT_TYPE_VALUE-constant" title="Azure::Storage::Blob::Default::CONTENT_TYPE_VALUE (constant)">CONTENT_TYPE_VALUE</a></span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

  <span class='comment'># call PutBlob with empty body
</span>  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_blob_from_headers'><span class='object_link'><a href="Blob/Serialization.html#blob_from_headers-class_method" title="Azure::Storage::Blob::Serialization.blob_from_headers (method)">blob_from_headers</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_blob'>blob</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_append_blob_from_content-instance_method">
  
    #<strong>create_append_blob_from_content</strong>(container, blob, content, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a new append blob with given content</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>content</code>                    - IO or String. Content to write.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:content_type</code>              - String. Content type for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_encoding</code>          - String. Content encoding for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_language</code>          - String. Content language for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_md5</code>               - String. Content MD5 for the blob.
Will be saved with blob.</p>
</li><li>
<p><code>:cache_control</code>             - String. Cache control for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_disposition</code>       - String. Conveys additional
information about how to process the response payload,</p>

<pre class="code ruby"><code class="ruby">and also can be used to attach additional metadata</code></pre>
</li><li>
<p><code>:max_size</code>                  - Integer. The max length in bytes
permitted for the append blob.</p>
</li><li>
<p><code>:metadata</code>                  - Hash. Custom metadata values to
store with the blob.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an active lease,</p>

<pre class="code ruby"><code class="ruby">specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179451.aspx">msdn.microsoft.com/en-us/library/azure/dd179451.aspx</a></p>

<p>Returns a Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/append.rb', line 208</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_append_blob_from_content'>create_append_blob_from_content</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># Fail fast if content has larger size than max_size
</span>  <span class='id identifier rubyid_max_size'>max_size</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='symbol'>:max_size</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_max_size'>max_size</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:size</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_max_size'>max_size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Core</span><span class='op'>::</span><span class='const'>StorageError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Given content has exceeded the specified maximum size for the blob.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_get_or_apply_content_type'>get_or_apply_content_type</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_create_append_blob'>create_append_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
  <span class='comment'># initialize the append block options.
</span>  <span class='id identifier rubyid_append_block_options'>append_block_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_append_block_options'>append_block_options</span><span class='lbracket'>[</span><span class='symbol'>:if_modified_since</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if_modified_since</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if_modified_since</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_append_block_options'>append_block_options</span><span class='lbracket'>[</span><span class='symbol'>:if_unmodified_since</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if_unmodified_since</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if_unmodified_since</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_append_block_options'>append_block_options</span><span class='lbracket'>[</span><span class='symbol'>:if_match</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if_match</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if_match</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_append_block_options'>append_block_options</span><span class='lbracket'>[</span><span class='symbol'>:if_none_match</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if_none_match</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if_none_match</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_append_block_options'>append_block_options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_append_block_options'>append_block_options</span><span class='lbracket'>[</span><span class='symbol'>:max_size</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_max_size'>max_size</span> <span class='kw'>if</span> <span class='id identifier rubyid_max_size'>max_size</span>
  <span class='id identifier rubyid_position'>position</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> <span class='op'>!</span><span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_eof?'>eof?</span>
    <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Blob/BlobConstants.html" title="Azure::Storage::Blob::BlobConstants (module)">BlobConstants</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Blob/BlobConstants.html#DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES-constant" title="Azure::Storage::Blob::BlobConstants::DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES (constant)">DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES</a></span></span><span class='rparen'>)</span>
    <span class='comment'># set the append position to make sure that each append is going to the correct offset.
</span>    <span class='id identifier rubyid_append_block_options'>append_block_options</span><span class='lbracket'>[</span><span class='symbol'>:append_position</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_position'>position</span>
    <span class='id identifier rubyid_append_blob_block'>append_blob_block</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='id identifier rubyid_append_block_options'>append_block_options</span><span class='rparen'>)</span>
    <span class='comment'># calculate the position after the append.
</span>    <span class='id identifier rubyid_position'>position</span> <span class='op'>+=</span> <span class='id identifier rubyid_payload'>payload</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_get_properties_options'>get_properties_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_get_properties_options'>get_properties_options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>

  <span class='comment'># Get the blob properties
</span>  <span class='id identifier rubyid_get_blob_properties'>get_blob_properties</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_get_properties_options'>get_properties_options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_blob_snapshot-instance_method">
  
    #<strong>create_blob_snapshot</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a snapshot of a blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:metadata</code>                  - Hash. Custom metadata values to
store with the blob snapshot.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to create the blob snapshot</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to create the blob snapshot</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to create the blob snapshot</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to create the blob snapshot</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. If this header is
specified, the operation will be performed only if both of the</p>

<pre class="code ruby"><code class="ruby">following conditions are met:
 - The blob&#39;s lease is currently active.
 - The lease ID specified in the request matches that of the blob.
If this header is specified and both of these conditions are not met, the request will fail
and the Snapshot Blob operation will fail with status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691971.aspx">msdn.microsoft.com/en-us/library/azure/ee691971.aspx</a></p>

<p>Returns the snapshot DateTime value</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 668</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_blob_snapshot'>create_blob_snapshot</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>snapshot</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-snapshot</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_block_blob-instance_method">
  
    #<strong>create_block_blob</strong>(container, blob, content, options = {})  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='create_block_blob_from_content-instance_method'>create_block_blob_from_content</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a new block blob or updates the content of an existing
block blob.</p>

<p>Updating an existing block blob overwrites any existing metadata on the
blob Partial updates are not supported with create_block_blob the content
of the existing blob is overwritten with the content of the new blob. To
perform a partial update of the content of a block blob, use the
create_block_list method.</p>

<p>Note that the default content type is application/octet-stream.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>content</code>                    - IO or String. The content of the
blob.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:transactional_md5</code>         - String. An MD5 hash of the blob
content. This hash is used to verify the integrity of the blob during
transport.</p>

<pre class="code ruby"><code class="ruby">When this header is specified, the storage service checks the hash that has arrived with the one that was sent.
If the two hashes do not match, the operation will fail with error code 400 (Bad Request).</code></pre>
</li><li>
<p><code>:single_upload_threshold</code>   - Integer. Threshold in bytes for
single upload, must be lower than 256MB or 256MB will be used.</p>
</li><li>
<p><code>:content_length</code>            - Integer. Length of the content to
upload, must be specified if &#39;content&#39; does not implement
&#39;size&#39;.</p>
</li><li>
<p><code>:content_type</code>              - String. Content type for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_encoding</code>          - String. Content encoding for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_language</code>          - String. Content language for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_md5</code>               - String. Content MD5 for the blob.
Will be saved with blob.</p>
</li><li>
<p><code>:cache_control</code>             - String. Cache control for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_disposition</code>       - String. Conveys additional
information about how to process the response payload,</p>

<pre class="code ruby"><code class="ruby">and also can be used to attach additional metadata</code></pre>
</li><li>
<p><code>:metadata</code>                  - Hash. Custom metadata values to
store with the blob.</p>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an active lease,</p>

<pre class="code ruby"><code class="ruby">specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179451.aspx">msdn.microsoft.com/en-us/library/azure/dd179451.aspx</a></p>

<p>Returns a Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/block.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_block_blob'>create_block_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:size</span>
    <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_length</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_length</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Either optional parameter &#39;content_length&#39; should be set or &#39;content&#39; should implement &#39;size&#39; method to get payload&#39;s size.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_threshold'>threshold</span> <span class='op'>=</span> <span class='id identifier rubyid_get_single_upload_threshold'>get_single_upload_threshold</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:single_upload_threshold</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_threshold'>threshold</span>
    <span class='id identifier rubyid_create_block_blob_multiple_put'>create_block_blob_multiple_put</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_create_block_blob_single_put'>create_block_blob_single_put</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_page_blob-instance_method">
  
    #<strong>create_page_blob</strong>(container, blob, length, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a new page blob. Note that calling create_page_blob to
create a page blob only initializes the blob. To add content to a page
blob, call put_blob_pages method.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>length</code>                     - Integer. Specifies the maximum
size for the page blob, up to 1 TB.</p>

<pre class="code ruby"><code class="ruby">The page blob size must be aligned to a 512-byte boundary.</code></pre>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:transactional_md5</code>         - String. An MD5 hash of the blob
content. This hash is used to verify the integrity of the blob during
transport.</p>

<pre class="code ruby"><code class="ruby">When this header is specified, the storage service checks the hash that has arrived with the one that was sent.
If the two hashes do not match, the operation will fail with error code 400 (Bad Request).</code></pre>
</li><li>
<p><code>:content_type</code>              - String. Content type for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_encoding</code>          - String. Content encoding for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_language</code>          - String. Content language for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_md5</code>               - String. Content MD5 for the blob.
Will be saved with blob.</p>
</li><li>
<p><code>:cache_control</code>             - String. Cache control for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_disposition</code>       - String. Conveys additional
information about how to process the response payload,</p>

<pre class="code ruby"><code class="ruby">and also can be used to attach additional metadata</code></pre>
</li><li>
<p><code>:metadata</code>                  - Hash. Custom metadata values to
store with the blob.</p>
</li><li>
<p><code>:sequence_number</code>           - Integer. The sequence number is a
user-controlled value that you can use to track requests.</p>

<pre class="code ruby"><code class="ruby">The value of the sequence number must be between 0 and 2^63 - 1.The default value is 0.</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an active lease,</p>

<pre class="code ruby"><code class="ruby">specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179451.aspx">msdn.microsoft.com/en-us/library/azure/dd179451.aspx</a></p>

<p>Returns a Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/page.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_page_blob'>create_page_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='comment'># set x-ms-blob-type to PageBlob
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PageBlob</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># ensure content-length is 0 and x-ms-blob-content-length is the blob length
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Length</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-length</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

  <span class='comment'># set x-ms-sequence-number from options (or default to 0)
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-sequence-number</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sequence_number</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

  <span class='comment'># set the rest of the optional headers
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-MD5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:transactional_md5</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-encoding</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_encoding</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-language</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_language</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-md5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_md5</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-cache-control</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cache_control</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-disposition</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_disposition</span><span class='rbracket'>]</span>

  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Default.html" title="Azure::Storage::Blob::Default (module)">Default</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Blob/Default.html#CONTENT_TYPE_VALUE-constant" title="Azure::Storage::Blob::Default::CONTENT_TYPE_VALUE (constant)">CONTENT_TYPE_VALUE</a></span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

  <span class='comment'># call PutBlob with empty body
</span>  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_blob_from_headers'><span class='object_link'><a href="Blob/Serialization.html#blob_from_headers-class_method" title="Azure::Storage::Blob::Serialization.blob_from_headers (method)">blob_from_headers</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_blob'>blob</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_page_blob_from_content-instance_method">
  
    #<strong>create_page_blob_from_content</strong>(container, blob, length, content, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a new page blob filled with given content.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>length</code>                     - Integer. Specifies the maximum
size for the page blob, up to 1 TB.</p>

<pre class="code ruby"><code class="ruby">The page blob size must be aligned to a 512-byte boundary.</code></pre>
</li><li>
<p><code>content</code>                    - String or IO. The content to put
in the page blob.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:content_type</code>              - String. Content type for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_encoding</code>          - String. Content encoding for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_language</code>          - String. Content language for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_md5</code>               - String. Content MD5 for the blob.
Will be saved with blob.</p>
</li><li>
<p><code>:cache_control</code>             - String. Cache control for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_disposition</code>       - String. Conveys additional
information about how to process the response payload,</p>

<pre class="code ruby"><code class="ruby">and also can be used to attach additional metadata</code></pre>
</li><li>
<p><code>:metadata</code>                  - Hash. Custom metadata values to
store with the blob.</p>
</li><li>
<p><code>:sequence_number</code>           - Integer. The sequence number is a
user-controlled value that you can use to track requests.</p>

<pre class="code ruby"><code class="ruby">The value of the sequence number must be between 0 and 2^63 - 1.The default value is 0.</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to create a new blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an active lease,</p>

<pre class="code ruby"><code class="ruby">specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179451.aspx">msdn.microsoft.com/en-us/library/azure/dd179451.aspx</a></p>

<p>Returns a Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/page.rb', line 546</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_page_blob_from_content'>create_page_blob_from_content</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_get_or_apply_content_type'>get_or_apply_content_type</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_create_page_blob'>create_page_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
  <span class='id identifier rubyid_upload_count'>upload_count</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Float</span><span class='lparen'>(</span><span class='id identifier rubyid_length'>length</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='const'>Float</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Blob/BlobConstants.html" title="Azure::Storage::Blob::BlobConstants (module)">BlobConstants</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Blob/BlobConstants.html#DEFAULT_WRITE_PAGE_SIZE_IN_BYTES-constant" title="Azure::Storage::Blob::BlobConstants::DEFAULT_WRITE_PAGE_SIZE_IN_BYTES (constant)">DEFAULT_WRITE_PAGE_SIZE_IN_BYTES</a></span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>

  <span class='kw'>for</span> <span class='id identifier rubyid_idx'>idx</span> <span class='kw'>in</span> <span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_upload_count'>upload_count</span>
    <span class='id identifier rubyid_start_range'>start_range</span> <span class='op'>=</span> <span class='id identifier rubyid_idx'>idx</span> <span class='op'>*</span> <span class='const'><span class='object_link'><a href="Blob/BlobConstants.html" title="Azure::Storage::Blob::BlobConstants (module)">BlobConstants</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Blob/BlobConstants.html#DEFAULT_WRITE_PAGE_SIZE_IN_BYTES-constant" title="Azure::Storage::Blob::BlobConstants::DEFAULT_WRITE_PAGE_SIZE_IN_BYTES (constant)">DEFAULT_WRITE_PAGE_SIZE_IN_BYTES</a></span></span>
    <span class='id identifier rubyid_end_range'>end_range</span> <span class='op'>=</span> <span class='id identifier rubyid_start_range'>start_range</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="Blob/BlobConstants.html" title="Azure::Storage::Blob::BlobConstants (module)">BlobConstants</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Blob/BlobConstants.html#DEFAULT_WRITE_PAGE_SIZE_IN_BYTES-constant" title="Azure::Storage::Blob::BlobConstants::DEFAULT_WRITE_PAGE_SIZE_IN_BYTES (constant)">DEFAULT_WRITE_PAGE_SIZE_IN_BYTES</a></span></span> <span class='op'>-</span> <span class='int'>1</span>
    <span class='id identifier rubyid_end_range'>end_range</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_end_range'>end_range</span> <span class='op'>&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_put_blob_pages'>put_blob_pages</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_start_range'>start_range</span><span class='comma'>,</span> <span class='id identifier rubyid_end_range'>end_range</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Blob/BlobConstants.html" title="Azure::Storage::Blob::BlobConstants (module)">BlobConstants</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Blob/BlobConstants.html#DEFAULT_WRITE_PAGE_SIZE_IN_BYTES-constant" title="Azure::Storage::Blob::BlobConstants::DEFAULT_WRITE_PAGE_SIZE_IN_BYTES (constant)">DEFAULT_WRITE_PAGE_SIZE_IN_BYTES</a></span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>lease_id:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_get_properties_options'>get_properties_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_get_properties_options'>get_properties_options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='comment'># Get the blob properties
</span>  <span class='id identifier rubyid_get_blob_properties'>get_blob_properties</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_get_properties_options'>get_properties_options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_blob-instance_method">
  
    #<strong>delete_blob</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Deletes a blob or blob snapshot.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:snapshot</code>                  - String. An opaque DateTime value
that specifies the blob snapshot to</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_retrieve'>retrieve</span> <span class='id identifier rubyid_information'>information</span> <span class='id identifier rubyid_from'>from</span><span class='period'>.</span> <span class='lparen'>(</span><span class='id identifier rubyid_optional'>optional</span><span class='rparen'>)</span>
</code></pre>
</li><li>
<p><code>:delete_snapshots</code>          - Symbol. Used to specify the scope
of the delete operation for snapshots.</p>

<pre class="code ruby"><code class="ruby">This parameter is ignored if a blob does not have snapshots, or if a
snapshot is specified in the snapshot parameter. (optional)

Possible values include:
  * +:only+     - Deletes only the snapshots for the blob, but leaves the blob
  * +:include+  - Deletes the blob and all of the snapshots for the blob</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to create the blob snapshot</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to create the blob snapshot</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to create the blob snapshot</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to create the blob snapshot</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an</p>

<pre class="code ruby"><code class="ruby">active lease, specify the valid lease ID for this header. If a valid lease ID is not specified
on the request, the operation will fail with status code 403 (Forbidden).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179440.aspx">msdn.microsoft.com/en-us/library/azure/dd179440.aspx</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


914
915
916
917
918
919
920
921
922
923
924
925
926
927
928
929
930</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 914</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_blob'>delete_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>snapshot</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:delete_snapshots</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:include</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:delete_snapshots</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-delete-snapshots</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:delete_snapshots</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:delete_snapshots</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:delete</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_blob-instance_method">
  
    #<strong>get_blob</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Reads or downloads a blob from the system, including its metadata
and properties.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:start_range</code>               - Integer. Position of first byte
of first page. (optional)</p>
</li><li>
<p><code>:end_range</code>                 - Integer. Position of last byte of
of last page. (optional)</p>
</li><li>
<p><code>:snapshot</code>                  - String. An opaque DateTime value
that specifies the blob snapshot to</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_retrieve'>retrieve</span> <span class='id identifier rubyid_information'>information</span> <span class='id identifier rubyid_from'>from</span><span class='period'>.</span> <span class='lparen'>(</span><span class='id identifier rubyid_optional'>optional</span><span class='rparen'>)</span>
</code></pre>
</li><li>
<p><code>:get_content_md5</code>           - Boolean. Return the MD5 hash for
the range. This option only valid if</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_start_range'>start_range</span> <span class='kw'>and</span> <span class='id identifier rubyid_end_range'>end_range</span> <span class='id identifier rubyid_are'>are</span> <span class='id identifier rubyid_specified'>specified</span><span class='period'>.</span> <span class='lparen'>(</span><span class='id identifier rubyid_optional'>optional</span><span class='rparen'>)</span>
</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>             - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to get the blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to get the blob</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to get the blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to get the blob</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. If this header is
specified, the operation will be performed only if both of the</p>

<pre class="code ruby"><code class="ruby">following conditions are met:
 - The blob&#39;s lease is currently active.
 - The lease ID specified in the request matches that of the blob.
If this header is specified and both of these conditions are not met, the request will fail
and the Get Blob operation will fail with status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179440.aspx">msdn.microsoft.com/en-us/library/azure/dd179440.aspx</a></p>

<p>Returns a blob and the blob body</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_blob'>get_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>snapshot</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_range</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_range</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='kw'>not</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_range</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_range</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-range</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bytes=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_range</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_range</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-range-get-content-md5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:get_content_md5</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_blob_from_headers'><span class='object_link'><a href="Blob/Serialization.html#blob_from_headers-class_method" title="Azure::Storage::Blob::Serialization.blob_from_headers (method)">blob_from_headers</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_blob'>blob</span> <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_blob_metadata-instance_method">
  
    #<strong>get_blob_metadata</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Returns metadata on the blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:snapshot</code>                  - String. An opaque DateTime value
that specifies the blob snapshot to</p>

<pre class="code ruby"><code class="ruby">retrieve information from.</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>             - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to get the blob metadata</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to get the blob metadata</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to get the blob metadata</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to get the blob metadata</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. If this header is
specified, the operation will be performed only if both of the</p>

<pre class="code ruby"><code class="ruby">following conditions are met:

 - The blob&#39;s lease is currently active.
 - The lease ID specified in the request matches that of the blob.

If this header is specified and both of these conditions are not met, the request will fail
and the Get Blob Metadata operation will fail with status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179350.aspx">msdn.microsoft.com/en-us/library/azure/dd179350.aspx</a></p>

<p>Returns a Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 349</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_blob_metadata'>get_blob_metadata</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>metadata</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>snapshot</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_blob_from_headers'><span class='object_link'><a href="Blob/Serialization.html#blob_from_headers-class_method" title="Azure::Storage::Blob::Serialization.blob_from_headers (method)">blob_from_headers</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_blob'>blob</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_snapshot'>snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_blob_properties-instance_method">
  
    #<strong>get_blob_properties</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Returns all properties and metadata on the blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:snapshot</code>                  - String. An opaque DateTime value
that specifies the blob snapshot to</p>

<pre class="code ruby"><code class="ruby">retrieve information from.</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>             - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to get the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to get the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to get the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to get the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. If this header is
specified, the operation will be performed only if both of the</p>

<pre class="code ruby"><code class="ruby">following conditions are met:

 - The blob&#39;s lease is currently active.
 - The lease ID specified in the request matches that of the blob.

If this header is specified and both of these conditions are not met, the request will fail
and the Get Blob Properties operation will fail with status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179394.aspx">msdn.microsoft.com/en-us/library/azure/dd179394.aspx</a></p>

<p>Returns the blob properties with a Blob instance</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 155</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_blob_properties'>get_blob_properties</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>snapshot</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:head</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_blob_from_headers'><span class='object_link'><a href="Blob/Serialization.html#blob_from_headers-class_method" title="Azure::Storage::Blob::Serialization.blob_from_headers (method)">blob_from_headers</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_blob'>blob</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_snapshot'>snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="incremental_copy_blob-instance_method">
  
    #<strong>incremental_copy_blob</strong>(destination_container, destination_blob, source_uri, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Copies a snapshot of the source page blob to a destination page
blob. The snapshot is copied such that only the differential changes
between the previously copied snapshot are transferred to the destination.
The copied snapshots are complete copies of the original snapshot and can
be read or copied from as usual.The destination of an incremental copy must
either not exist, or must have been created with a previous incremental
copy from the same source blob. Once created, the destination blob is
permanently associated with the source and may only be used for incremental
copies. The Get Blob Properties and List Blobs APIs indicate whether the
blob is an incremental copy blob created in this way. Incremental copy
blobs may not be downloaded directly. The only supported operations are Get
Blob Properties, Incremental Copy Blob, and Delete Blob. The copied
snapshots may be read and deleted as usual.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>destination_container</code>       - String. The destination
container name to copy to.</p>
</li><li>
<p><code>destination_blob</code>            - String. The destination blob
name to copy to.</p>
</li><li>
<p><code>source_uri</code>                  - String. Specifies the URI of the
source page blob snapshot.</p>

<pre class="code ruby"><code class="ruby">This value is a URL of up to 2 KB in length that specifies a page blob snapshot. The
value should be URL-encoded as it would appear in a request URI. The source blob must
either be public or must be authenticated via a shared access signature. Here is an
example of a source blob URL:
  https://myaccount.blob.core.windows.net/mycontainer/myblob?snapshot=&lt;DateTime&gt;</code></pre>
</li><li>
<p><code>options</code>                     - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:metadata</code>                   - Hash. Custom metadata values to
store with the copy. If this parameter is not</p>

<pre class="code ruby"><code class="ruby">specified, the operation will copy the source blob metadata to the destination
blob. If this parameter is specified, the destination blob is created with the
specified metadata, and metadata is not copied from the source blob.</code></pre>
</li><li>
<p><code>:if_modified_since</code>          - String. A DateTime value.
Specify this conditional header to copy the blob only if the</p>

<pre class="code ruby"><code class="ruby">destination blob has been modified since the specified date/time. If the destination blob
has not been modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>        - String. A DateTime value.
Specify this conditional header to copy the blob only if the</p>

<pre class="code ruby"><code class="ruby">destination blob has not been modified since the specified date/time. If the destination
blob has been modified, the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                   - String. An ETag value. Specify
an ETag value for this conditional header to copy the blob</p>

<pre class="code ruby"><code class="ruby">only if the specified ETag value matches the ETag value for an existing destination blob.
If the ETag for the destination blob does not match the ETag specified for If-Match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>              - String. An ETag value, or the
wildcard character (*). Specify an ETag value for this</p>

<pre class="code ruby"><code class="ruby">conditional header to copy the blob only if the specified ETag value does not match the
ETag value for the destination blob. Specify the wildcard character (*) to perform the
operation only if the destination blob does not exist. If the specified condition isn&#39;t met,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:timeout</code>                    - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                 - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:lease_id</code>                   - String. If this header is
specified, the operation will be performed only if both of the</p>

<pre class="code ruby"><code class="ruby">following conditions are met:
  - The blob&#39;s lease is currently active.
  - The lease ID specified in the request matches that of the blob.
If this header is specified and both of these conditions are not met, the request will fail
and the Snapshot Blob operation will fail with status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="https://docs.microsoft.com/en-us/rest/api/storageservices/incremental-copy-blob">docs.microsoft.com/en-us/rest/api/storageservices/incremental-copy-blob</a></p>

<p>Returns a tuple of (copy_id, copy_status).</p>
<ul><li>
<p><code>copy_id</code>                    - String. String identifier for
this copy operation. Use with Get Blob Properties to check</p>

<pre class="code ruby"><code class="ruby">the status of this copy operation, or pass to Abort Copy Blob to abort a pending copy.</code></pre>
</li><li>
<p><code>copy_status</code>                - String. State of the copy
operation. This is always pending to indicate that the copy has</p>

<pre class="code ruby"><code class="ruby">started and is in progress.</code></pre>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/page.rb', line 418</span>

<span class='kw'>def</span> <span class='id identifier rubyid_incremental_copy_blob'>incremental_copy_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_destination_container'>destination_container</span><span class='comma'>,</span> <span class='id identifier rubyid_destination_blob'>destination_blob</span><span class='comma'>,</span> <span class='id identifier rubyid_source_uri'>source_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># query parameters
</span>  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='const'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>QueryStringConstants</span><span class='op'>::</span><span class='const'>COMP</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>QueryStringConstants</span><span class='op'>::</span><span class='const'>INCREMENTAL_COPY</span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='comment'># URI
</span>  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_destination_container'>destination_container</span><span class='comma'>,</span> <span class='id identifier rubyid_destination_blob'>destination_blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='comment'># headers
</span>  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-copy-source</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_source_uri'>source_uri</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:metadata</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-copy-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-copy-status</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list_blob_blocks-instance_method">
  
    #<strong>list_blob_blocks</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Retrieves the list of blocks that have been uploaded as part of a
block blob.</p>

<p>There are two block lists maintained for a blob: 1) Committed Block List:
The list of blocks that have been successfully</p>

<pre class="code ruby"><code class="ruby">committed to a given blob with commitBlobBlocks.</code></pre>

<p>2) Uncommitted Block List: The list of blocks that have been uploaded for a</p>

<pre class="code ruby"><code class="ruby">blob using Put Block (REST API), but that have not yet been committed.
These blocks are stored in Microsoft Azure in association with a blob, but do
not yet form part of the blob.</code></pre>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                 - String. The container name.</p>
</li><li>
<p><code>blob</code>                      - String. The blob name.</p>
</li><li>
<p><code>options</code>                   - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:blocklist_type</code>           - Symbol. One of :all, :committed,
:uncommitted. Defaults to :all (optional)</p>
</li><li>
<p><code>:snapshot</code>                 - String. An opaque DateTime value
that specifies the blob snapshot to</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_retrieve'>retrieve</span> <span class='id identifier rubyid_information'>information</span> <span class='id identifier rubyid_from'>from</span><span class='period'>.</span> <span class='lparen'>(</span><span class='id identifier rubyid_optional'>optional</span><span class='rparen'>)</span>
</code></pre>
</li><li>
<p><code>:timeout</code>                  - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>               - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>            - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li><li>
<p><code>:lease_id</code>                 - String. If this header is
specified, the operation will be performed only if both of the</p>

<pre class="code ruby"><code class="ruby">following conditions are met:
  - The blob&#39;s lease is currently active.
  - The lease ID specified in the request matches that of the blob.
If this header is specified and both of these conditions are not met, the request will fail
and the operation will fail with status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179400.aspx">msdn.microsoft.com/en-us/library/azure/dd179400.aspx</a></p>

<p>Returns a list of Azure::Storage::Entity::Blob::Block instances</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/block.rb', line 263</span>

<span class='kw'>def</span> <span class='id identifier rubyid_list_blob_blocks'>list_blob_blocks</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:blocklist_type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:blocklist_type</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:all</span>

  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>blocklist</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>snapshot</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>blocklisttype</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:blocklist_type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:blocklist_type</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_block_list_from_xml'><span class='object_link'><a href="Blob/Serialization.html#block_list_from_xml-class_method" title="Azure::Storage::Blob::Serialization.block_list_from_xml (method)">block_list_from_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list_page_blob_ranges-instance_method">
  
    #<strong>list_page_blob_ranges</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Returns a list of active page ranges for a page blob. Active page
ranges are those that have been populated with data.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:start_range</code>               - Integer. Position of first byte
of first page. (optional)</p>
</li><li>
<p><code>:end_range</code>                 - Integer. Position of last byte of
of last page. (optional)</p>
</li><li>
<p><code>:snapshot</code>                  - String. An opaque DateTime value
that specifies the blob snapshot to</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_retrieve'>retrieve</span> <span class='id identifier rubyid_information'>information</span> <span class='id identifier rubyid_from'>from</span><span class='period'>.</span> <span class='lparen'>(</span><span class='id identifier rubyid_optional'>optional</span><span class='rparen'>)</span>
</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:location_mode</code>             - LocationMode. Specifies the
location mode used to decide</p>

<pre class="code ruby"><code class="ruby">which location the request should be sent to.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to list the pages only if</p>

<pre class="code ruby"><code class="ruby">the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to list the pages only if</p>

<pre class="code ruby"><code class="ruby">the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to list the pages only if</p>

<pre class="code ruby"><code class="ruby">the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to list the pages only if</p>

<pre class="code ruby"><code class="ruby">the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:previous_snapshot</code>         - String. An opaque DateTime value
that specifies that the response will contain only pages that</p>

<pre class="code ruby"><code class="ruby">were changed between target blob and previous snapshot. Changed pages include both updated and
cleared pages. The target blob may be a snapshot, as long as the snapshot specified by this
is the older of the two.</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. If this header is
specified, the operation will be performed only if both of the</p>

<pre class="code ruby"><code class="ruby">following conditions are met:
 - The blob&#39;s lease is currently active.
 - The lease ID specified in the request matches that of the blob.
If this header is specified and both of these conditions are not met, the request will fail
and the Get Blob operation will fail with status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691973.aspx">msdn.microsoft.com/en-us/library/azure/ee691973.aspx</a></p>

<p>Returns a list of page ranges in the format [ [start, end], [start, end], …
]</p>

<pre class="code ruby"><code class="ruby">e.g. [ [0, 511], [512, 1024], ... ]</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/page.rb', line 296</span>

<span class='kw'>def</span> <span class='id identifier rubyid_list_page_blob_ranges'>list_page_blob_ranges</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pagelist</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>snapshot</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:snapshot</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>prevsnapshot</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:previous_snapshot</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:previous_snapshot</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:request_location_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Azure.html" title="Azure (module)">Azure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Azure::Storage (module)">Storage</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>RequestLocationMode</span><span class='op'>::</span><span class='const'>PRIMARY_OR_SECONDARY</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_range</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_range</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='kw'>not</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_range</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-range</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bytes=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_range</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_range</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_range</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_pagelist'>pagelist</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_page_list_from_xml'><span class='object_link'><a href="Blob/Serialization.html#page_list_from_xml-class_method" title="Azure::Storage::Blob::Serialization.page_list_from_xml (method)">page_list_from_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pagelist'>pagelist</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put_blob_block-instance_method">
  
    #<strong>put_blob_block</strong>(container, blob, block_id, content, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a new block to be committed as part of a block blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>   - String. The container name.</p>
</li><li>
<p><code>blob</code>        - String. The blob name.</p>
</li><li>
<p><code>block_id</code>    - String. The block id. Note: this should be the
raw block id, not Base64 encoded.</p>
</li><li>
<p><code>content</code>     - IO or String. The content of the blob.</p>
</li><li>
<p><code>options</code>      - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:content_md5</code>           - String. Content MD5 for the request
contents.</p>
</li><li>
<p><code>:timeout</code>               - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>            - String. Provides a client-generated,
opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:lease_id</code>              - String. Required if the blob has an
active lease. To perform this operation on a blob with an</p>

<pre class="code ruby"><code class="ruby">active lease, specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd135726.aspx">msdn.microsoft.com/en-us/library/azure/dd135726.aspx</a></p>

<p>Returns response of the operation</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141
142
143
144
145
146
147
148
149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/block.rb', line 138</span>

<span class='kw'>def</span> <span class='id identifier rubyid_put_blob_block'>put_blob_block</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_block_id'>block_id</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>block</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>blockid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_strict_encode64'>strict_encode64</span><span class='lparen'>(</span><span class='id identifier rubyid_block_id'>block_id</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-MD5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_md5</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-MD5</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put_blob_pages-instance_method">
  
    #<strong>put_blob_pages</strong>(container, blob, start_range, end_range, content, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a range of pages in a page blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. Name of container</p>
</li><li>
<p><code>blob</code>                       - String. Name of blob</p>
</li><li>
<p><code>start_range</code>                - Integer. Position of first byte
of first page</p>
</li><li>
<p><code>end_range</code>                  - Integer. Position of last byte of
of last page</p>
</li><li>
<p><code>content</code>                    - IO or String. Content to write.
Length in bytes should equal end_range - start_range + 1</p>
</li><li>
<p><code>options</code>                    - Hash. A collection of options.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:transactional_md5</code>         - String. An MD5 hash of the page
content. This hash is used to verify the integrity of the page during
transport.</p>

<pre class="code ruby"><code class="ruby">When this header is specified, the storage service checks the hash that has arrived with the one that was sent.</code></pre>
</li><li>
<p><code>:if_sequence_number_le</code>     - Integer. If the blob&#39;s
sequence number is less than or equal to the specified value, the request
proceeds;</p>

<pre class="code ruby"><code class="ruby">otherwise it fails with the SequenceNumberConditionNotMet error (HTTP status code 412 - Precondition Failed).</code></pre>
</li><li>
<p><code>:if_sequence_number_lt</code>     - Integer. If the blob&#39;s
sequence number is less than the specified value, the request proceeds;</p>

<pre class="code ruby"><code class="ruby">otherwise it fails with SequenceNumberConditionNotMet error (HTTP status code 412 - Precondition Failed).</code></pre>
</li><li>
<p><code>:if_sequence_number_eq</code>     - Integer. If the blob&#39;s
sequence number is equal to the specified value, the request proceeds;</p>

<pre class="code ruby"><code class="ruby">otherwise it fails with SequenceNumberConditionNotMet error (HTTP status code 412 - Precondition Failed).</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to write the page only if</p>

<pre class="code ruby"><code class="ruby">the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to write the page only if</p>

<pre class="code ruby"><code class="ruby">the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to write the page only if</p>

<pre class="code ruby"><code class="ruby">the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to write the page only if</p>

<pre class="code ruby"><code class="ruby">the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an active lease,</p>

<pre class="code ruby"><code class="ruby">specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691975.aspx">msdn.microsoft.com/en-us/library/azure/ee691975.aspx</a></p>

<p>Returns Blob</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/page.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_put_blob_pages'>put_blob_pages</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_start_range'>start_range</span><span class='comma'>,</span> <span class='id identifier rubyid_end_range'>end_range</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>page</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-MD5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:transactional_md5</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-range</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bytes=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_start_range'>start_range</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_range'>end_range</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-page-write</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>update</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># clear default content type
</span>  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>

  <span class='comment'># set optional headers
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Blob/Serialization.html" title="Azure::Storage::Blob::Serialization (module)">Serialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_blob_from_headers'><span class='object_link'><a href="Blob/Serialization.html#blob_from_headers-class_method" title="Azure::Storage::Blob::Serialization.blob_from_headers (method)">blob_from_headers</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_blob'>blob</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="release_blob_lease-instance_method">
  
    #<strong>release_blob_lease</strong>(container, blob, lease, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Releases the lease. The lease may be released if the lease ID
specified on the request matches that associated with the blob. Releasing
the lease allows another client to immediately acquire the lease for the
blob as soon as the release is complete.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>lease</code>                      - String. The lease id.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to release the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to release the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to release the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to release the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:origin</code>                    - String. Optional. Specifies the
origin from which the request is issued. The presence of this header
results</p>

<pre class="code ruby"><code class="ruby">in cross-origin resource sharing headers on the response.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691972.aspx">msdn.microsoft.com/en-us/library/azure/ee691972.aspx</a></p>

<p>Returns nil on success</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


575
576
577</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 575</span>

<span class='kw'>def</span> <span class='id identifier rubyid_release_blob_lease'>release_blob_lease</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_lease'>lease</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_release_lease'>release_lease</span> <span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_lease'>lease</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="renew_blob_lease-instance_method">
  
    #<strong>renew_blob_lease</strong>(container, blob, lease, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Renews the lease. The lease can be renewed if the lease ID
specified on the request matches that associated with the blob. Note that
the lease may be renewed even if it has expired as long as the blob has not
been modified or leased again since the expiration of that lease. When you
renew a lease, the lease duration clock resets.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>lease</code>                      - String. The lease id</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to renew the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to renew the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to renew the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to renew the lease</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:origin</code>                    - String. Optional. Specifies the
origin from which the request is issued. The presence of this header
results</p>

<pre class="code ruby"><code class="ruby">in cross-origin resource sharing headers on the response.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691972.aspx">msdn.microsoft.com/en-us/library/azure/ee691972.aspx</a></p>

<p>Returns the renewed lease id</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 499</span>

<span class='kw'>def</span> <span class='id identifier rubyid_renew_blob_lease'>renew_blob_lease</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_lease'>lease</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_renew_lease'>renew_lease</span> <span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_lease'>lease</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="resize_page_blob-instance_method">
  
    #<strong>resize_page_blob</strong>(container, blob, size, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Resizes a page blob to the specified size.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>size</code>                       - String. The blob size. Resizes a
page blob to the specified size.</p>

<pre class="code ruby"><code class="ruby">If the specified value is less than the current size of the blob,
then all pages above the specified value are cleared.</code></pre>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691966.aspx">msdn.microsoft.com/en-us/library/azure/ee691966.aspx</a></p>

<p>Returns nil on success.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/page.rb', line 351</span>

<span class='kw'>def</span> <span class='id identifier rubyid_resize_page_blob'>resize_page_blob</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>content_length:</span> <span class='id identifier rubyid_size'>size</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_blob_properties'>set_blob_properties</span> <span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_blob_metadata-instance_method">
  
    #<strong>set_blob_metadata</strong>(container, blob, metadata, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Sets metadata headers on the blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>metadata</code>                   - Hash. The custom metadata.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to set the blob metadata</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to set the blob metadata</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to set the blob metadata</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to set the blob metadata</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an active</p>

<pre class="code ruby"><code class="ruby">lease, specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/dd179414.aspx">msdn.microsoft.com/en-us/library/azure/dd179414.aspx</a></p>

<p>Returns nil on success.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 404</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_blob_metadata'>set_blob_metadata</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>metadata</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_metadata_to_headers'>add_metadata_to_headers</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_blob_properties-instance_method">
  
    #<strong>set_blob_properties</strong>(container, blob, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Sets system properties defined for a blob.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:content_type</code>              - String. Content type for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_encoding</code>          - String. Content encoding for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_language</code>          - String. Content language for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_md5</code>               - String. Content MD5 for the blob.
Will be saved with blob.</p>
</li><li>
<p><code>:cache_control</code>             - String. Cache control for the
blob. Will be saved with blob.</p>
</li><li>
<p><code>:content_disposition</code>       - String. Conveys additional
information about how to process the response payload,</p>

<pre class="code ruby"><code class="ruby">and also can be used to attach additional metadata</code></pre>
</li><li>
<p><code>:content_length</code>            - Integer. Resizes a page blob to
the specified size. If the specified</p>

<pre class="code ruby"><code class="ruby">value is less than the current size of the blob, then all pages above
the specified value are cleared. This property cannot be used to change
the size of a block blob. Setting this property for a block blob returns
status code 400 (Bad Request).</code></pre>
</li><li>
<p><code>:sequence_number_action</code>    - Symbol. This property indicates
how the service should modify the sequence</p>

<pre class="code ruby"><code class="ruby">                             number for the blob. Required if :sequence_number is used. This property
                             applies to page blobs only.

                             Specify one of the following options for this property:

* +:max+                       - Sets the sequence number to be the higher of the value included with
                                 the request and the value currently stored for the blob.
* +:update+                    - Sets the sequence number to the value included with the request.
* +:increment+                 - Increments the value of the sequence number by 1. If specifying this
                                 option, do not include the sequence_number option; doing so will return
                                 status code 400 (Bad Request).</code></pre>
</li><li>
<p><code>:sequence_number</code>           - Integer. This property sets the
blob&#39;s sequence number. The sequence number is a</p>

<pre class="code ruby"><code class="ruby">user-controlled property that you can use to track requests and manage concurrency
issues. Required if the :sequence_number_action option is set to :max or :update.
This property applies to page blobs only.

Use this together with the :sequence_number_action to update the blob&#39;s sequence
number, either to the specified value or to the higher of the values specified with
the request or currently stored with the blob.

This header should not be specified if :sequence_number_action is set to :increment;
in this case the service automatically increments the sequence number by one.

To set the sequence number to a value of your choosing, this property must be specified
together with :sequence_number_action</code></pre>
</li><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:lease_id</code>                  - String. Required if the blob has
an active lease. To perform this operation on a blob with an active</p>

<pre class="code ruby"><code class="ruby">lease, specify the valid lease ID for this header.</code></pre>
</li></ul>

<p>Remarks:</p>

<p>The semantics for updating a blob&#39;s properties are as follows:</p>
<ul><li>
<p>A page blob&#39;s sequence number is updated only if the request meets
either of the following conditions:</p>

<pre class="code ruby"><code class="ruby">* The :sequence_number_action property is set to :max or :update, and a value for :sequence_number is also set.
* The :sequence_number_action property is set to :increment, indicating that the service should increment
  the sequence number by one.</code></pre>
</li><li>
<p>The size of the page blob is modified only if a value for :content_length
is specified.</p>
</li><li>
<p>If :sequence_number and/or :content_length are the only properties
specified, then the other properties of the blob will NOT be modified.</p>
</li><li>
<p>If any one or more of the following properties are set, then all of these
properties are set together. If a value is not provided for a given
property when at least one of the properties listed below is set, then that
property will be cleared for the blob.</p>

<pre class="code ruby"><code class="ruby">* :cache_control
* :content_type
* :content_md5
* :content_encoding
* :content_language
* :content_disposition</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691966.aspx">msdn.microsoft.com/en-us/library/azure/ee691966.aspx</a></p>

<p>Returns nil on success.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/blob.rb', line 276</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_blob_properties'>set_blob_properties</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comp</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>properties</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_query'>with_query</span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_blob_uri'>blob_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-encoding</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_encoding</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-language</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_language</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-md5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_md5</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-cache-control</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cache_control</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-length</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_length</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_length</span><span class='rbracket'>]</span>
    <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-content-disposition</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_disposition</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sequence_number_action</span><span class='rbracket'>]</span>
      <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-sequence-number-action</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sequence_number_action</span><span class='rbracket'>]</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sequence_number_action</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>increment</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sequence_number</span><span class='rbracket'>]</span>
        <span class='const'><span class='object_link'><a href="../Storage.html#StorageService-constant" title="Azure::Storage::StorageService (constant)">StorageService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_header'>with_header</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-blob-sequence-number</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sequence_number</span><span class='rbracket'>]</span> 
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_add_blob_conditional_headers'>add_blob_conditional_headers</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-ms-lease-id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lease_id</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='symbol'>:put</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_sequence_number-instance_method">
  
    #<strong>set_sequence_number</strong>(container, blob, action, number, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Sets a page blob&#39;s sequence number.</p>

<h4 id="label-Attributes">Attributes</h4>
<ul><li>
<p><code>container</code>                  - String. The container name.</p>
</li><li>
<p><code>blob</code>                       - String. The blob name.</p>
</li><li>
<p><code>action</code>                     - Symbol. Indicates how the service
should modify the sequence</p>

<pre class="code ruby"><code class="ruby">                             number for the blob. Required if :sequence_number is used. This property
                             applies to page blobs only.

                             Specify one of the following options for this property:

* +:max+                       - Sets the sequence number to be the higher of the value included with
                                 the request and the value currently stored for the blob.
* +:update+                    - Sets the sequence number to the value included with the request.
* +:increment+                 - Increments the value of the sequence number by 1. If specifying this
                                 option, do not include the sequence_number option; doing so will return
                                 status code 400 (Bad Request).</code></pre>
</li><li>
<p><code>number</code>                     - Integer. Sets the blob&#39;s
sequence number. The sequence number is a</p>

<pre class="code ruby"><code class="ruby">user-controlled property that you can use to track requests and manage concurrency
issues. Required if the &#39;action&#39; parameter is set to :max or :update.
This property applies to page blobs only.

Use this together with the &#39;action&#39; parameter to update the blob&#39;s sequence
number, either to the specified value or to the higher of the values specified with
the request or currently stored with the blob.

This header should not be specified if the &#39;action&#39; parameter is set to :increment;
in this case the service automatically increments the sequence number by one.

To set the sequence number to a value of your choosing, this property must be specified
together with the &#39;action&#39; parameter</code></pre>
</li><li>
<p><code>options</code>                    - Hash. Optional parameters.</p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>Accepted key/value pairs in options parameter are:</p>
<ul><li>
<p><code>:timeout</code>                   - Integer. A timeout in seconds.</p>
</li><li>
<p><code>:request_id</code>                - String. Provides a
client-generated, opaque value with a 1 KB character limit that is recorded</p>

<pre class="code ruby"><code class="ruby">in the analytics logs when storage analytics logging is enabled.</code></pre>
</li><li>
<p><code>:if_modified_since</code>         - String. A DateTime value. Specify
this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob has been modified since the specified date/time. If the blob has not been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_unmodified_since</code>       - String. A DateTime value. Specify
this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob has not been modified since the specified date/time. If the blob has been modified,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_match</code>                  - String. An ETag value. Specify an
ETag value for this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value matches the value specified. If the values do not match,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li><li>
<p><code>:if_none_match</code>             - String. An ETag value. Specify an
ETag value for this conditional header to set the blob properties</p>

<pre class="code ruby"><code class="ruby">only if the blob&#39;s ETag value does not match the value specified. If the values are identical,
the Blob service returns status code 412 (Precondition Failed).</code></pre>
</li></ul>

<p>See <a
href="http://msdn.microsoft.com/en-us/library/azure/ee691966.aspx">msdn.microsoft.com/en-us/library/azure/ee691966.aspx</a></p>

<p>Returns nil on success.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


496
497
498
499</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'blob/lib/azure/storage/blob/page.rb', line 496</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_sequence_number'>set_sequence_number</span><span class='lparen'>(</span><span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_action'>action</span><span class='comma'>,</span> <span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>sequence_number_action:</span> <span class='id identifier rubyid_action'>action</span><span class='comma'>,</span> <span class='label'>sequence_number:</span> <span class='id identifier rubyid_number'>number</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_blob_properties'>set_blob_properties</span> <span class='id identifier rubyid_container'>container</span><span class='comma'>,</span> <span class='id identifier rubyid_blob'>blob</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Mar  9 14:04:06 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.4.9).
</div>

    </div>
  </body>
</html>